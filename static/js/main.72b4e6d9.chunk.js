(this["webpackJsonptgve-app"]=this["webpackJsonptgve-app"]||[]).push([[0],{136:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sfType=t.propertyCountByProperty=t.propertyCount=t.properties=t.isONSCode=t.isColumnAllNumeric=t.getPropertyValues=t.getKeyColumns=t.describeFeatureVariables=t.coordsAsXY=t.arrayPlotProps=void 0;var n=r(69),o=r(61);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.sfType=function(e){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type};t.properties=function(e){if(!e||!e.features)return null;var t=e.features[0].properties;return Object.keys(t)};t.getKeyColumns=function(e){if(!e||!e.features)return null;var t=[],r=l(e);return Object.keys(r).forEach((function(n){Array.from(r[n]).length===e.features.length&&t.push(n)})),t.length>0?t:null};t.isONSCode=function(e){if(!e||0===e.length)return!1;var t=!0;return e.forEach((function(e){(0,n.isString)(e)&&9===e.length&&e.match(/^[EWS]\d{2}.{6}$/)||(t=!1)})),t};t.describeFeatureVariables=function(e){if(!e||!(0,n.isObject)(e))return null;var t={};return Object.keys(e).forEach((function(r){var a=String,i=e[r];(0,o.isStringDate)(i)?a=Date:(0,n.isNumber)(i)?a=Number:(0,n.isBoolean)(i)?a=Boolean:(0,n.isObject)(i)&&(a=Object),t[r]=a})),t};var l=function(e,t){if(!e||!e.features)return null;var r={},n=new Set;return e.features.forEach((function(e){e.properties&&Object.keys(e.properties)&&Object.keys(e.properties).forEach((function(o){t&&t===o?n.add(e.properties[o]):("object"===i(r[o])||(r[o]=new Set),r[o].add(e.properties[o]))}))})),t?Array.from(n):r};t.getPropertyValues=l;t.propertyCount=function(e,t,r){if(e&&t){var n=[],o=r;return r&&0!==r.length||(o=l({features:e},t)),e.forEach((function(e){Object.keys(e.properties).forEach((function(r){if(r===t){var a=o.indexOf(e.properties[r]);n[a]&&n[a].x===e.properties[r]?n[a].y+=1:n[a]={x:e.properties[r],y:1}}}))})),n}};t.propertyCountByProperty=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e&&t&&r&&t!==r){var o={};return e.forEach((function(e){var i=e.properties;if(i&&Object.keys(i)){var l=n&&new Date(i[r])&&new Date(i[r]).getFullYear()?new Date(i[r]).getFullYear():i[r];Object.keys(i).forEach((function(e){e===t&&(o[l]&&o[l][i[e]]?o[l][i[e]]+=1:o[l]=Object.assign(o[l]||{},a({},i[e],1)))}))}})),o}};t.coordsAsXY=function(e,t){return e.features?e.features.map((function(e){var r={x:e.geometry.coordinates[0],y:e.geometry.coordinates[1]};return t&&e.properties[t]&&(r.size=e.properties[t]),r})):null};t.isColumnAllNumeric=function(e,t){if(!Array.isArray(e)&&(!(0,n.isString)(t)||!(0,n.isNumber)(t)))return null;var r=!0;return e.forEach((function(e){(0,n.isStringNumeric)(e.properties[+t||0===+t?Object.keys(e.properties)[t]:t])||(r=!1)})),r};t.arrayPlotProps=function(e,t){var r={data:[],type:null};if(!e||!Array.isArray(e)||!e.length||!t)return r;var a=e.map((function(e){return e.properties[t]})),i=(0,o.uniqueValuePercentage)(a,95),l=[];e.forEach((function(e){var r=e.properties[t];(0,n.isStringNumeric)(r)&&l.push(r)}));var u=l.length/a.length*100,c=l.length>10?u>95:u>50;return i&&!c?r:{data:c?e.map((function(e,r){return{x:r,y:e.properties[t]}})):(0,o.xyObjectByProperty)(e,t),type:c?"continuous":"cardinal"}}},151:function(e,t,r){"use strict";function n(e,r){Object.defineProperty(t,e,{value:r,enumerable:!0})}n("PRD_URL","https://tgve.github.io/tgvejs"),n("DEV_URL","http://localhost:8000"),n("UI_LIST",["checkbox","radio","buttongroups","dropdown","slider"]),n("LAYERSTYLES",["arc","geojson","grid","heatmap","hex","icon","line","path","scatterplot","sgrid","barvis"]),n("LAYERS_2D_REGEX","sgrid|scatter|geojson|line|path"),n("DECKGL_INIT",{longitude:-1.6362,latitude:53.8321,zoom:10,pitch:55,bearing:0}),n("LIGHT_SETTINGS",{lightsPosition:[-.144528,49.739968,8e3,-3.807751,54.104682,8e3],ambientRatio:.4,diffuseRatio:.6,specularRatio:.2,lightsStrength:[.8,0,.8,0],numberOfLights:2}),n("PLOT_W",250),n("TURQUOISE_RANGE",["#12939A","#1293FF"]),n("BLANKSTYLE",{version:8,name:"Blank",center:[0,0],zoom:0,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(255,255,255,1)"}}],id:"blank"}),n("ICONLIMIT",500),n("ELEVATION",4),n("RADIUS",100),n("DATE_REGEX","date|time|datetime|year"),n("BOTTOM_PANEL_MARGIN_LEFT",340),n("BOTTOM_PANEL_MARGIN_RIGHT",60),n("BOTTOM_PANEL_MARGIN_BOTTOM",30),n("BOTTOM_PANEL_HEIGHT",120),n("LEGEND_MIN_HEIGHT",100)},194:function(e,t){},198:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(236);function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=l((0,o.useState)([]),2),r=t[0],n=t[1],i=e.onSelectCallback,u=e.values,c=e.filter,f=e.multiVarSelect,s=e.title,p=e.single;return o.default.createElement(a.Select,{options:u,labelKey:"id",valueKey:"value",placeholder:s||"Choose",maxDropdownHeight:"300px",type:a.TYPE.search,multi:!p,onChange:function(e){var t=e.value;n(t),f?(0===Object.keys(t).length?delete f[c]:f[c]=new Set(t.map((function(e){return e.value}))),"function"===typeof i&&i(0===Object.keys(f).length?{what:""}:{what:"multi",selected:f})):"function"===typeof i&&i(t)},value:e.value||r})}},229:function(e,t){},303:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLayerProps=t.LAYERS=void 0;var n=r(390),o=l(r(367)),a=l(r(472)),i=r(69);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t){return Object.keys(e).forEach((function(r){t[r]=e[r]})),t},c=function(e,t,r,n,o){return{type:e,min:t,max:r,default:n,step:o}},f={pickable:{type:"boolean",value:!0},extruded:{type:"boolean",value:!0},autoHighlight:{type:"boolean",value:!0}},s={},p={class:{value:n.HexagonLayer,type:"class"},extruded:{type:"boolean",value:!0},radius:c("number",50,1e3,100,50),elevationScale:c("number",1,8,1,2)};s.hex=u(f,p);var d={class:{value:n.ScatterplotLayer,type:"class"},opacity:c("number",0,1,.8,.1),getRadius:{type:"column",value:"number",default:30},radiusScale:c("number",0,1,.8,.1),radiusMinPixels:c("number",1,10,1,1),radiusMaxPixels:c("number",1,100,100,5)};s.scatterplot=u(f,d);var y={class:{value:n.GeoJsonLayer,type:"class"},pickable:{type:"boolean",value:!0},extruded:{type:"boolean",value:!1},stroked:{type:"boolean",value:!1},filled:{type:"boolean",value:!0},lineWidthScale:c("number",20,100,20,5),lineWidthMinPixels:c("number",2,20,2,2),getRadius:{type:"column",value:"number",default:30},getLineWidth:{type:"column",value:"number",default:1},getElevation:c("number",30,100,30,10)};s.geojson=y;var m={class:{value:o.default,type:"class"},wrapLongitude:{type:"boolean",value:!1}};s.icon=u(f,m);var h={class:{value:n.ScreenGridLayer,type:"class"},cellSizePixels:c("number",50,100,50,5)};s.sgrid=u(f,h);var b={class:{value:n.GridLayer,type:"class"},cellSize:c("number",100,5e4,100,50),elevationScale:c("number",4,10,4,2)};s.grid=u(f,b);var g={class:{value:n.LineLayer,type:"class"},getWidth:{type:"column",value:"number",default:1},getSourcePosition:function(e){return e.geometry.coordinates[0]},getTargetPosition:function(e){return e.geometry.coordinates[1]}};s.line=u(f,g);var v={class:{value:n.ArcLayer,type:"class"},getWidth:{type:"column",value:"number",default:1},getWeight:{type:"column",value:"number",default:1},getTilt:{type:"column",value:"number",default:0},getSourcePosition:function(e){return e.geometry.coordinates[0]},getTargetPosition:function(e){return e.geometry.coordinates[1]}};s.arc=u(f,v);var O={class:{value:n.PathLayer,type:"class"},widthUnits:"pixels",getPath:function(e){return e.geometry.coordinates},getWidth:{type:"column",value:"number",default:2},widthScale:{type:"column",value:"number",default:1},widthMinScale:c("number",0,100,1,2)};s.path=u(f,O);var S={class:{value:n.HeatmapLayer,type:"class"},getWeight:{type:"column",value:"number",default:1}};s.heatmap=u(f,S);var w={class:{value:n.TextLayer,type:"class"},getText:{type:"column",value:"string",default:""}};s.text=u(f,w);var E={class:{value:a.default,type:"class"},getRotationAngle:{type:"column",value:"number",default:0},getScale:{type:"column",value:"number",default:20}};s.barvis=u(f,E);var j={class:{value:n.PointCloudLayer,type:"class"},pointSize:c("number",1,100,10,2),opacity:c("number",0,1,.5,.1)};s.pointcloud=u(f,j);t.getLayerProps=function(e){return(0,i.isString)(e)?Object.freeze(s[e]):null};var _=Object.keys(s);t.LAYERS=_},326:function(e,t){},346:function(e,t){},367:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(28),i=r(90),l=(o=r(542))&&o.__esModule?o:{default:o};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(a,e);var t,r,n,o=s(a);function a(){return u(this,a),o.apply(this,arguments)}return t=a,(r=[{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,n=e.changeFlags.dataChanged||t.sizeScale!==r.sizeScale;if(n){var o=new l.default({maxZoom:16,radius:t.sizeScale});o.load(t.data.map((function(e){return{geometry:{coordinates:t.getPosition(e)},properties:e}}))),this.setState({index:o})}var a=Math.floor(this.context.viewport.zoom);(n||a!==this.state.z)&&this.setState({data:this.state.index.getClusters([-180,-85,180,85],a),z:a})}},{key:"getPickingInfo",value:function(e){var t=e.info,r=e.mode,n=t.object&&t.object.properties;return n&&(n.cluster&&"hover"!==r&&(t.objects=this.state.index.getLeaves(n.cluster_id,25).map((function(e){return e.properties}))),t.object=n),t}},{key:"renderLayers",value:function(){var e=this.state.data,t=this.props,r=t.iconAtlas,n=t.iconMapping,o=t.sizeScale;return new i.IconLayer(this.getSubLayerProps({id:"icon",data:e,iconAtlas:r,iconMapping:n,sizeScale:o,getPosition:function(e){return e.geometry.coordinates},getIcon:function(e){return 0===(t=e.properties.cluster?e.properties.point_count:1)?"":t<10?"marker-".concat(t):t<100?"marker-".concat(Math.floor(t/10),"0"):"marker-100";var t},getSize:function(e){return t=e.properties.cluster?e.properties.point_count:1,Math.min(100,t)/100+1;var t}}))}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.CompositeLayer);t.default=y},369:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(398);function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}t.default=function(e){return o.useEffect((function(){}),[e.alert]),e.alert?o.createElement(a.Notification,{overrides:{Body:{style:function(){return{width:"100%"}}}},kind:e.alert.kind||a.KIND.warning,autoHideDuration:3e3},(function(){return e.alert.content})):null}},386:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(p=(0,o.useState)(),d=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(p,d)||function(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(p,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],u=e.type;var p,d;if(!u)return null;var y=e.type!==a.MarkSeries&&!e.noLimit&&e.data&&e.data.length>10?e.data.slice(0,10):e.data,m=e.plotStyle,h=e.title,b=e.noXAxis,g=e.noYAxis,v=e.onValueClick;return y&&y.length?o.default.createElement("div",{className:"unselectable",style:{position:"relative"}},e.type!==a.MarkSeries&&!e.noLimit&&e.data&&e.data.length>10&&o.default.createElement("h4",null,"Plotting first ",10," values:"),g&&h&&o.default.createElement("h4",null,h),o.default.createElement(s,{xType:"ordinal",margin:{bottom:m&&m.marginBottom||40},animation:{duration:1},height:m&&m.height||f,width:m&&m.width||f,onMouseLeave:function(){n(!1)}},!b&&o.default.createElement(a.XAxis,{tickSize:0,tickFormat:function(e){return(0,l.shortenName)(e,10)},tickValues:y.length>10?y.filter((function(e,t){if(t%Math.floor(y.length/10)===0)return e.x})).map((function(e){return e.x})):y.map((function(e){return e.x})),position:"right",tickLabelAngle:-65,style:{line:{strokeWidth:0},text:{fill:e.dark?"#fff":"#000"}}}),!g&&o.default.createElement(a.YAxis,{tickSize:0,tickLabelAngle:-45,tickFormat:function(e){return(0,i.format)(".2s")(e)},style:{line:{strokeWidth:0},title:{fill:e.dark?"#fff":"#000"},text:{fill:e.dark?"#fff":"#000"}},position:"start",title:h}),o.default.createElement(u,{onValueClick:v,onNearestX:function(e){n({x:e.x,y:e.y})},data:y}),r&&o.default.createElement(a.Hint,{value:r}))):null};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(167),i=r(152),l=r(61);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=r(151).PLOT_W,s=(0,a.makeWidthFlexible)(a.XYPlot)},388:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.data,r=e.width,a=void 0===r?250:r,l=e.height,u=void 0===l?200:l,c=e.title,f=void 0===c?"Plot":c,s=e.dark,p=e.xaxis,d=void 0===p?{}:p,y=e.yaxis,m=void 0===y?{}:y,h=e.displayModeBar,b=e.onClickCallback,g={visible:!0,color:s&&"#fff"},v={color:s&&"#fff"};return t&&(0,o.isArray)(t)&&0!==t.length?n.default.createElement(i,{data:t,layout:{width:a,height:u,title:{text:f,font:v},margin:{t:30,r:20,b:50,l:30},paper_bgcolor:s&&"#0000",plot_bgcolor:s&&"#0000",xaxis:Object.assign(g,d),yaxis:Object.assign(v,m),legend:{x:.35,y:-.35,orientation:"h",font:v}},onClick:function(e){"function"===typeof b&&b(e.points)},config:{displayModeBar:!h&&!1}}):null};var n=a(r(0)),o=r(69);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,a(r(522)).default)(window.Plotly)},389:function(e,t,r){},408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(0)),o=a(r(451));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return n.default.createElement(o.default,e)}},445:function(e,t,r){e.exports=r(547)},450:function(e,t,r){},451:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,f.params)(e,e.location?e.location.search:window.location.search);return a.default.createElement("main",null,a.default.createElement(i.Provider,{value:p},a.default.createElement(l.BaseProvider,{theme:!1===t.dark?l.LightTheme:l.DarkTheme},a.default.createElement(c.default,t))))};var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),i=r(190),l=r(393),u=r(537),c=(o=r(454))&&o.__esModule?o:{default:o};r(389);var f=r(534);function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var p=new u.Client},454:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=y(r(0)),o=y(r(390)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(392)),i=r(464),l=r(61),u=r(151),c=y(r(475));r(389);var f=y(r(528)),s=r(69),p=r(530);function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function y(e){return e&&e.__esModule?e:{default:e}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k="linear-gradient(to top, red , yellow)",P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(h,e);var t,r,d,y=w(h);function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),t=y.call(this,e);var r=(0,p.initViewState)(e);return t.state={loading:!0,layers:[],backgroundImage:k,mapStyle:"mapbox://styles/mapbox/"+(e.dark?"dark":"streets")+"-v9",initialViewState:r,subsetBoundsChange:!1,lastViewPortChange:new Date,colorName:"default",iconLimit:u.ICONLIMIT,legend:!1,multiVarSelect:e.select||{},width:window.innerWidth,height:window.innerHeight,tooltipColumns:{column1:"accident_severity",column2:"date"},geographyURL:e.geographyURL,geographyColumn:e.geographyColumn,column:e.column,layerName:e.layerName,bottomPanel:!1},t._callGenerateLayer=t._callGenerateLayer.bind(j(t)),t._renderTooltip=t._renderTooltip.bind(j(t)),t._fetchAndUpdateState=t._fetchAndUpdateState.bind(j(t)),t._fitViewport=t._fitViewport.bind(j(t)),t._initWithGeojson=t._initWithGeojson.bind(j(t)),t._initDataState=t._initDataState.bind(j(t)),t._updateStateAndLayers=t._updateStateAndLayers.bind(j(t)),t._resize=t._resize.bind(j(t)),t._updateURL=t._updateURL.bind(j(t)),t._throttleUR=(0,i.throttle)((function(e){return t._updateURL(e)}),300),t._urlCallback=t._urlCallback.bind(j(t)),t}return t=h,(r=[{key:"componentDidUpdate",value:function(e){var t=e.data,r=e.defaultURL,n=e.geographyURL,o=e.geographyColumn;if(JSON.stringify(t)!==JSON.stringify(this.props.data)||r!==this.props.defaultURL||n!==this.props.geographyURL||o!==this.props.geographyColumn)return this._initDataState(),!0}},{key:"componentDidMount",value:function(){this._initDataState(),window.addEventListener("resize",this._resize)}},{key:"_initDataState",value:function(){var e=this,t=this.props,r=t.data,n=t.defaultURL;(0,s.isObject)(r)&&r.features&&r.features.length?this.setState({loading:!1,data:r},(function(){e._fitViewport(),e._callGenerateLayer()})):n?this._fetchAndUpdateState(n):this.setState({loading:!1})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resize)}},{key:"_fetchAndUpdateState",value:function(e,t){var r=this;!e||(0,l.isURL)(e)?t&&"object"!==v(t)||(0,l.fetchData)(e,(function(n,o){var a=r.props.geographyURL;(0,l.isURL)(a)?(0,l.fetchData)(a,(function(e,o){r._updateStateAndLayers(o,e,n,t,a)})):a&&!(0,l.isURL)(a)?r._initWithGeojson(o,n,t||{content:"Invalid URL: "+a},e):r._initWithGeojson(o,n,t,e)})):this.state.loading&&this.setState({loading:!1})}},{key:"_updateStateAndLayers",value:function(e,t,r,n,o){var a=this;e?this.setState({loading:!1,alert:{content:"Could not reach: "+o}}):this.setState({loading:!1,geography:t,data:r,alert:n||null},(function(){a._fitViewport(t),a._callGenerateLayer()}))}},{key:"_initWithGeojson",value:function(e,t,r,n){e?this.setState({loading:!1,alert:{content:"Could not reach: "+n}}):(this.setState({loading:!1,data:t}),this._fitViewport(t),this._callGenerateLayer({customError:r||null}))}},{key:"_callGenerateLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,p.generateLayer)(e,this.props,this.state,this._renderTooltip,this._callGenerateLayer);t&&this.setState(b({},t))}},{key:"_fitViewport",value:function(e,t){this.setState({viewport:(0,p.getViewPort)(this.state,e,t,this.map)})}},{key:"_renderTooltip",value:function(e,t,r){var o=this,a=e.x,i=e.y,u=e.object;if(u){var c=n.default.createElement(f.default,m({popup:!0===r,onCloseCallback:function(){return o.setState({popup:null})}},this.state.tooltipColumns,{isMobile:(0,l.isMobile)(),topx:a,topy:i,selectedObject:u}));r?this.setState({tooltip:null,popup:c}):this.setState({tooltip:c})}else r?this.setState({popup:null}):this.setState({tooltip:null})}},{key:"_updateURL",value:function(e){var t=this.state,r=t.subsetBoundsChange,n=t.lastViewPortChange;if(new Date-n>1e3&&((0,l.updateHistory)(b(b({},e),{defaultURL:this.props.defaultURL,geographyURL:this.props.geographyURL,geographyColumn:this.props.geographyColumn})),this.setState({lastViewPortChange:new Date})),r){var o=this.map&&this.map.getBounds();this.setState({loading:!0}),this._callGenerateLayer({filter:{what:"boundsSubset",bounds:o}})}}},{key:"render",value:function(){var e=this,t=this.props,r=t.hideCharts,i=t.hideChartGenerator,u=t.dark,f=t.defaultURL,s=t.leftSidebarContent,p=t.hideSidebar,d=this.state,y=d.tooltip,h=d.popup,g=d.viewport,v=d.initialViewState,O=d.loading,S=d.mapStyle,w=d.alert,E=d.data,j=d.filtered,_=d.bottomPanel,k=d.layerName,P=d.legend,C=d.coords,x=P&&!new RegExp("grid|sgrid|text|heatmap|icon","i").test(k);return n.default.createElement("div",null,n.default.createElement("div",{className:"loader",style:{zIndex:O?999:-1,visibility:"string"===typeof S&&S.endsWith("No map-v9")?"hidden":"visible"}}),n.default.createElement(a.default,{preserveDrawingBuffer:!0,ref:function(t){e.map=t&&t.getMap()},mapStyle:S,onViewportChange:function(t){e._throttleUR(t),e.setState({viewport:t})},height:this.state.height+"px",width:this.state.width+"px",viewState:g||v},n.default.createElement("div",{className:"mapboxgl-ctrl-top-right",style:{zIndex:9}},n.default.createElement(a.NavigationControl,m({},g,{onViewportChange:function(t){return e.setState({viewport:t})}})),n.default.createElement(a.ScaleControl,{maxWidth:100,unit:"metric",style:{left:20,bottom:100}})),n.default.createElement(o.default,{ref:function(t){return e.deck=t&&t.deck},viewState:g||v,initialViewState:v,layers:this.state.layers,onClick:function(t,r){!t.layer&&C&&(e.setState({coords:null}),e._callGenerateLayer()),e._renderTooltip(t,r,!0)}})),!p&&n.default.createElement(c.default,{hideCharts:r,map:this.map,deck:this.deck,hideChartGenerator:i,leftSidebarContent:s,dark:u,layerName:k,isMobile:(0,l.isMobile)(),key:"decksidebar",alert:w,unfilteredData:E&&E.features,data:j,colourCallback:function(t){e._callGenerateLayer({cn:t})},urlCallback:this._urlCallback,column:this.state.column,onSelectCallback:function(t){return e._callGenerateLayer({filter:t})},onLayerOptionsCallback:function(t){return e._callGenerateLayer({layerOptions:t})},toggleSubsetBoundsChange:function(){e.setState({subsetBoundsChange:!e.state.subsetBoundsChange}),e._callGenerateLayer()},subsetBoundsChange:this.state.subsetBoundsChange,onlocationChange:function(t){e._fitViewport(void 0,t)},datasetName:f,bottomPanel:_,multiVarSelect:this.state.multiVarSelect}),x&&n.default.createElement("div",{id:"tgve-legend",style:b({},(0,l.theme)(this.props.dark)),className:"right-side-panel mapbox-legend"},P),y,h)}},{key:"_urlCallback",value:function(e,t){var r=this;if(this.setState({geography:null,column:null,tooltip:"",loading:!0,coords:null}),t)try{this.setState({data:t}),this._fitViewport(t),this._callGenerateLayer()}catch(n){this._fetchAndUpdateState(void 0,{content:n.message})}else(0,l.isURL)(e)?(0,l.fetchData)(e,(function(t,n){n?r.setState({loading:!1,alert:{content:"Could not reach: "+e}}):r._updateStateAndLayers(!1,null,t)})):this._initDataState()}},{key:"_resize",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}}])&&O(t.prototype,r),d&&O(t,d),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.default.Component);t.default=P},455:function(e,t){},470:function(e){e.exports=JSON.parse('{"marker-1":{"x":0,"y":0,"width":128,"height":128,"anchorY":128},"marker-2":{"x":128,"y":0,"width":128,"height":128,"anchorY":128},"marker-3":{"x":256,"y":0,"width":128,"height":128,"anchorY":128},"marker-4":{"x":384,"y":0,"width":128,"height":128,"anchorY":128},"marker-5":{"x":0,"y":128,"width":128,"height":128,"anchorY":128},"marker-6":{"x":128,"y":128,"width":128,"height":128,"anchorY":128},"marker-7":{"x":256,"y":128,"width":128,"height":128,"anchorY":128},"marker-8":{"x":384,"y":128,"width":128,"height":128,"anchorY":128},"marker-9":{"x":0,"y":256,"width":128,"height":128,"anchorY":128},"marker-10":{"x":128,"y":256,"width":128,"height":128,"anchorY":128},"marker-20":{"x":256,"y":256,"width":128,"height":128,"anchorY":128},"marker-30":{"x":384,"y":256,"width":128,"height":128,"anchorY":128},"marker-40":{"x":0,"y":384,"width":128,"height":128,"anchorY":128},"marker-50":{"x":128,"y":384,"width":128,"height":128,"anchorY":128},"marker-60":{"x":256,"y":384,"width":128,"height":128,"anchorY":128},"marker-70":{"x":384,"y":384,"width":128,"height":128,"anchorY":128},"marker-80":{"x":0,"y":512,"width":128,"height":128,"anchorY":128},"marker-90":{"x":128,"y":512,"width":128,"height":128,"anchorY":128},"marker-100":{"x":256,"y":512,"width":128,"height":128,"anchorY":128},"marker":{"x":384,"y":512,"width":128,"height":128,"anchorY":128}}')},471:function(e,t,r){e.exports=r.p+"static/media/location-icon-atlas.37932833.png"},472:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(28),i=(o=r(473))&&o.__esModule?o:{default:o},l=r(31);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(){return(f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=s(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(s,e);var t,r,n,o=d(s);function s(){return u(this,s),o.apply(this,arguments)}return t=s,(r=[{key:"getShaders",value:function(){return f(m(s.prototype),"getShaders",this).call(this,{vs:"\n  attribute vec3 positions;\n  attribute vec3 instancePositions;\n  attribute vec3 instancePositions64Low;\n  attribute float instanceRadius;\n  attribute vec4 instanceColors;\n  attribute float instanceScale;\n  attribute float instanceRotationAngle;\n  // attribute float instanceWidth;\n  // for onHover to work must\n  // delcare instancePickingColors here and assign it to\n  // geometry.pickingColor\n  // and then register DECKGL_FILTER_COLOR hook in\n  // fragment shader\n  attribute vec3 instancePickingColors;\n\n  varying vec4 vColor;\n  varying vec2 vPosition;\n\n  vec2 rotate_by_angle(vec2 v, float angle) {\n    float angle_radian = angle * PI / 180.0;\n    float cos_angle = cos(angle_radian);\n    float sin_angle = sin(angle_radian);\n    // v.x = v.x * cos_angle - v.x * sin_angle;\n    // v.y = v.y * sin_angle + v.y * cos_angle;\n    mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n    return rotationMatrix * v;\n  }\n\n  void main(void) {\n    geometry.pickingColor = instancePickingColors;\n\n    vec3 offsetCommon = positions * project_size(instanceRadius);\n    offsetCommon = vec3(rotate_by_angle(offsetCommon.xy, instanceRotationAngle), 0);\n    offsetCommon.x = offsetCommon.x * 8.0;\n    offsetCommon.y = offsetCommon.y * 3.0;\n    // width if active\n    // offsetCommon = offsetCommon.x + offsetCommon.x / instanceWidth;\n\n    offsetCommon = offsetCommon * instanceScale;\n\n    vec3 positionCommon = project_position(instancePositions, instancePositions64Low);\n    // missx: So in your shader, positionCommon is the anchor position on the map.\n    // offsetCommon is the local coordinate relative to the anchor\n    // You want to leave the anchor alone and rotate the offset\n\n    gl_Position = project_common_position_to_clipspace(vec4(positionCommon + offsetCommon, 1.0));\n\n    vPosition = positions.xy;\n    vColor = instanceColors;\n    DECKGL_FILTER_COLOR(vColor, geometry);\n\n  }",fs:"\n  precision highp float;\n\n  varying vec4 vColor;\n  varying vec2 vPosition;\n\n  void main(void) {\n    gl_FragColor = vColor;\n    DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n  }",modules:[a.project32,a.picking]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:i.default.DOUBLE,accessor:"getPosition"},instanceRadius:{size:1,accessor:"getRadius",defaultValue:1},instanceColors:{size:4,type:i.default.UNSIGNED_BYTE,accessor:"getColor",defaultValue:[255,0,0,255]},instanceScale:{size:1,accessor:"getScale",defaultValue:1},instanceRotationAngle:{size:1,accessor:"getRotationAngle",defaultValue:1}})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(f(m(s.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:n}),n.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)})}}},{key:"draw",value:function(e){var t=e.uniforms;this.state.model.setUniforms(t).draw()}},{key:"_getModel",value:function(e){return new l.Model(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new l.Geometry({drawMode:i.default.TRIANGLE_STRIP,vertexCount:6,attributes:{positions:{size:2,value:new Float32Array([-.1,-1,.1,-1,-.1,1,-.1,1,.1,1,.1,-1])}}}),isInstanced:!0}))}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(a.Layer);t.default=h,h.layerName="BarLayer",h.defaultProps={getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:30},getColor:{type:"accessor",value:[0,0,0,255]},getScale:{type:"accessor",value:1},getRotationAngle:{type:"accessor",value:1}}},474:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(545).createBrowserHistory)();t.default=n},475:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=f((0,o.useState)(!e.isMobile),2),r=t[0],n=t[1],l=f((0,o.useState)(!1),2),u=l[0],s=l[1];return(0,o.useEffect)((function(){}),[e.bottomPanel]),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"side-panel-container",style:{marginLeft:r?0:"-320px"}},o.default.createElement(a.default,c({},e,{toggleOpen:function(){return n((function(e){return!e}))},toggleHexPlot:function(){return s((function(e){return!e}))}})),u&&o.default.createElement(i.default,{open:r,isMobile:e.isMobile,data:e.data}),o.default.createElement("div",{className:"close-button",onClick:function(){return n(!r)},style:{color:"white"}},o.default.createElement("div",{style:{backgroundColor:"#242730"}},o.default.createElement("i",{style:{fontSize:"2rem",color:"white !important"},className:r?"fa fa-arrow-circle-left":"fa fa-arrow-circle-right"})))))};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=l(r(476)),i=l(r(526));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},476:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=k(r(0)),a=r(91),i=r(200),l=r(404),u=r(234),c=r(540);r(478);var f=k(r(479)),s=k(r(482)),p=r(61),d=k(r(489)),y=k(r(369)),m=k(r(491)),h=k(r(492)),b=k(r(493)),g=r(69),v=k(r(198)),O=k(r(494)),S=k(r(516)),w=r(303),E=k(r(518)),j=k(r(520)),_=r(525);function k(e){return e&&e.__esModule?e:{default:e}}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var o=L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(P,e);var t,r,n,k=N(P);function P(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P),(t=k.call(this,e)).state={radius:100,year:"",reset:!1,multiVarSelect:e.multiVarSelect||{},barChartVariable:"road_type",datasetName:e.datasetName},t}return t=P,(r=[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=r.data,o=r.alert,a=r.layerName,i=r.column,l=r.subsetBoundsChange,u=r.hideChartGenerator,c=r.hideCharts,f=this.state,s=f.reset,p=f.year,d=f.barChartVariable;if(s!==t.reset||p!==t.year||o!==e.alert||l!==e.subsetBoundsChange||d!==t.barChartVariable||i!==e.column||a!==e.layerName||u!==e.hideChartGenerator||c!==e.hideCharts)return!0;if(!n&&!e.data)return!1;var y=Math.floor(Math.random()*n.length);return JSON.stringify(n[y])!==JSON.stringify(e.data[y])}},{key:"render",value:function(){var e=this,t=this.state,r=t.multiVarSelect,n=t.barChartVariable,k=t.datasetName,P=this.props,x=P.onLayerOptionsCallback,A=P.onSelectCallback,R=P.data,N=P.colourCallback,T=P.unfilteredData,L=P.toggleSubsetBoundsChange,D=P.urlCallback,I=P.alert,z=P.layerName,W=P.onlocationChange,B=P.column,F=P.dark,U=P.toggleOpen,V=P.toggleHexPlot,G=P.hideChartGenerator,H=P.hideCharts,Y=R&&R.length>1,K=!z||new RegExp("grid|sgrid|hex|scatter","i").test(z),X=Y&&Object.keys(R[0].properties).filter((function(e){return!(0,g.isEmptyOrSpaces)(e)})),q=function(t,r){e.setState({reset:!r,year:"",multiVarSelect:{},barChartVariable:"road_type",datasetName:t||e.props.datasetName})},J={TabPanel:{component:function(e){return o.default.createElement(c.StyledTabPanel,M({},e,{$pad:!1}))}}};return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{style:C({},(0,p.theme)(F)),className:"side-panel"},o.default.createElement(y.default,{alert:I}),(0,_.headerComponent)(o.default.createElement(o.default.Fragment,null,o.default.createElement("h2",null,(0,p.getMainMessage)(R,T)),Y&&o.default.createElement("h6",{className:"truncate"},"dataset: ",(0,p.firstLastNCharacters)(k,15)))),o.default.createElement("div",null,o.default.createElement(f.default,{toggleOpen:function(){return"function"===typeof U&&U()},urlCallback:function(e,t,r){q(e||r),"function"===typeof D&&D(e,t)}}),this.state.reset&&(!I||!I.content.includes("Could not reach:"))&&o.default.createElement(a.Button,{kind:a.KIND.secondary,size:a.SIZE.compact,onClick:function(){q(void 0,!0),"function"===typeof D&&D(),"function"===typeof e.props.showLegend&&e.props.showLegend(!1)}},"Reset"),Y&&o.default.createElement(h.default,{toggleOpen:function(){return"function"===typeof U&&U()},component:o.default.createElement(b.default,{data:R})}),o.default.createElement(E.default,{data:R,notEmpty:Y,map:this.props.map,deck:this.props.deck})),o.default.createElement("div",{className:"side-panel-body"},o.default.createElement("div",{className:"side-panel-body-content"},o.default.createElement("hr",{style:{clear:"both"}}),o.default.createElement(c.StatefulTabs,{initialState:{activeKey:"0"},id:"main-tabs"},o.default.createElement(c.Tab,{title:o.default.createElement("i",{style:{fontSize:"2rem"},className:"fa fa-info"}),overrides:J},!G&&o.default.createElement(O.default,{data:R,dark:F,plotStyle:{width:270,margin:10}}),Y&&X.length>0&&"grid"!==z&&o.default.createElement(o.default.Fragment,null,o.default.createElement("h6",null,"Column for layer:"),o.default.createElement(v.default,{title:"Choose Column",single:!0,value:B&&{id:(0,p.humanize)(B),value:B},values:X.map((function(e){return{id:(0,p.humanize)(e),value:e}})),onSelectCallback:function(t){var r=t&&t[0]?t[0].value:n;e.setState({barChartVariable:r}),"function"===typeof A&&A({what:"column",selected:r})}})),!H&&o.default.createElement(j.default,this.props)),o.default.createElement(c.Tab,{title:o.default.createElement("i",{style:{fontSize:"2rem"},className:"fa fa-sliders"}),overrides:J},Y&&(0,_.headerComponent)(o.default.createElement(m.default,{colourCallback:function(e){return"function"===typeof N&&N(e)}})),Y&&o.default.createElement(o.default.Fragment,null,o.default.createElement("h6",null,"Deck Layer:"),o.default.createElement(v.default,{title:"Choose Layer",single:!0,values:w.LAYERS.map((function(e){return{id:(0,p.humanize)(e),value:e}})),onSelectCallback:function(t){if(t&&t[0]){var r=t[0].value;e.setState({layerName:r}),"function"===typeof A&&A({what:"layerName",selected:r})}}}),o.default.createElement(S.default,{layerName:z,columnNames:X,onLayerOptionsCallback:function(e){"function"===typeof x&&x(C({},e))}})),(0,_.headerComponent)(o.default.createElement(o.default.Fragment,null,"Map Styles",o.default.createElement("br",null),o.default.createElement(s.default,{dark:F,onSelectCallback:function(e){return A&&A({selected:e,what:"mapstyle"})}}))),Y&&K&&o.default.createElement(u.StatefulCheckbox,{onChange:function(){return V&&V()}},"Hex Plot"),Y&&o.default.createElement(u.Checkbox,{checked:this.props.subsetBoundsChange,onChange:function(){return"function"===typeof L&&L()}},"Subset by map boundary")),T&&T.length>0&&o.default.createElement(c.Tab,{title:o.default.createElement("i",{style:{fontSize:"2rem"},className:"fa fa-filter"},r&&Object.keys(r).length?Object.keys(r).length:""),overrides:J},(0,_.headerComponent)(o.default.createElement(d.default,{multiVarSelect:r,onSelectCallback:function(t){"function"===typeof A&&A(0===Object.keys(t).length?{what:""}:{what:"multi",selected:t}),e.setState({multiVarSelect:t})},unfilteredData:T}))))),this.props.leftSidebarContent,o.default.createElement("div",{className:"space"}),Y&&(0,_.headerComponent)("Vis: "+(z||"None")),o.default.createElement("form",{className:"search-form",onSubmit:function(t){t.preventDefault(),(0,p.searchNominatom)(e.state.search,(function(e){var t=e&&e.length>0&&e[0].boundingbox;t=t&&t.map((function(e){return+e})),"function"===typeof W&&t&&W({bbox:t,lon:+e[0].lon,lat:+e[0].lat})}))}},o.default.createElement(l.FormControl,null,o.default.createElement(i.Input,{id:"search-nominatum",placeholder:"fly to ...",value:this.state.search,onChange:function(t){var r=t.target.value;return e.setState({search:r})},endEnhancer:"\ud83c\udf10"}))))))}}])&&A(t.prototype,r),n&&A(t,n),Object.defineProperty(t,"prototype",{writable:!1}),P}(o.default.Component);t.default=D},478:function(e,t,r){},479:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=p(o.useState(!1),2),r=t[0],n=t[1],f=p(o.useState(!1),2),s=f[0],d=f[1],h=e.urlCallback,b=e.toggleOpen;return o.createElement(o.Fragment,null,o.createElement(a.Button,{kind:a.KIND.secondary,size:a.SIZE.compact,onClick:function(){m(b,n)}},"Add data"),o.createElement(i.Modal,{onClose:function(){m(b,n)},isOpen:r},o.createElement(i.ModalHeader,null,o.createElement(c.default,{alert:s}),"Your data remains on your browser. It is NOT uploaded anywhere."),o.createElement(i.ModalBody,null,o.createElement(i.FocusOnce,null,o.createElement(u.default,{urlCallback:function(e){m(b,n),"function"===typeof h&&h(e)}})),o.createElement(l.default,{contentCallback:function(e){var t=e.textOrBuffer,r=e.name,o=e.type;if(o.match(/json|geo/i))try{var a=JSON.parse(t);"function"===typeof h&&h(null,a,r),m(b,n)}catch(i){console.log(i)}else o.match(/zip/)?"function"===typeof shp?"function"===typeof h&&shp(t).then((function(e){h(null,e,r),m(b,n)})):console.log("No shp in context or corrupt shapefile zip"):y.csv2geojson(t,(function(e,t){if(e){var o=Array.isArray(e)&&e[0]&&e[0].message;d({time:5e3,content:"Invalid format. "+(o?"ERROR: "+o:"")})}else"function"===typeof h&&h(null,t,r),m(b,n)}))}})),o.createElement(i.ModalFooter,null,o.createElement(i.ModalButton,{onClick:function(){n(!1),"function"===typeof b&&b()}},"Close"))))};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(91),i=r(318),l=f(r(480)),u=f(r(481)),c=f(r(369));function f(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=r(364);function m(e,t){"function"===typeof e&&e(),t((function(e){return!e}))}},480:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(539);function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,i=c(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=i.call(this,e)).state={progressAmount:0},t.reset=t.reset.bind(s(t)),t.handleDrop=t.handleDrop.bind(s(t)),t.startProgress=t.startProgress.bind(s(t)),t}return t=f,(r=[{key:"handleDrop",value:function(e,t){var r=this,n=this.props.contentCallback,o=/text.*|json|geo/,a=e[0];if(a.type.match(o)||a.type.match(/zip/)){var i=new FileReader;i.onload=function(e){r.setState({progressAmount:100}),r.reset(),"function"===typeof n&&n({textOrBuffer:i.result,name:a.name,type:a.type})},a.type.match(o)&&i.readAsText(a),a.type.match(/zip/)&&i.readAsArrayBuffer(a)}else this.setState({progressAmount:100}),this.reset(),console.log("File not supported!");this.startProgress()}},{key:"startProgress",value:function(){var e=this;this.intervalId=setInterval((function(){e.state.progressAmount>=100?e.reset():e.setState({progressAmount:e.state.progressAmount+10})}),500)}},{key:"reset",value:function(){clearInterval(this.intervalId),this.setState({progressAmount:0})}},{key:"render",value:function(){return o.createElement("center",{className:"file-upload"},o.createElement(a.FileUploader,{onCancel:this.reset,onDrop:this.handleDrop,progressAmount:this.state.progressAmount,progressMessage:this.state.progressAmount&&"Uploading... ".concat(this.state.progressAmount,"% of 100%")}))}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.Component);t.default=d},481:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.urlCallback,r=(f=(0,o.useState)(),s=2,function(e){if(Array.isArray(e))return e}(f)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(f,s)||function(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(f,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],u=r[1];var f,s;return o.default.createElement("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),(0,l.isURL)(n)&&"function"===typeof t&&t(n)}},o.default.createElement(i.FormControl,null,o.default.createElement(a.Input,{id:"url-input",placeholder:"https://domain.com/api/file.csv",value:n,onChange:function(e){var t=e.target.value;return u(t)},endEnhancer:"\ud83d\udd17"})))};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(200),i=r(404),l=r(61);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},482:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(r(0)),a=i(r(198));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,i=c(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=i.call(this,e)).state={bases:["No map"].concat(["dark","basic","streets","bright","light","satellite"]),selected:e.dark?"dark":"streets"},t}return t=f,(r=[{key:"render",value:function(){var e=this,t=this.state,r=t.selected,n=t.bases,i=this.props,l=i.onSelectCallback,u=i.dark;return o.default.createElement(a.default,{title:"dark"===r?"Default(dark)":u?r:"Default(streets)",single:!0,values:n.map((function(e){return{id:e,value:e}})),onSelectCallback:function(t){t&&t.length&&(e.setState({selected:t[0].value}),"function"===typeof l&&l(t[0].value))}})}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.default.Component);t.default=p},489:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.onSelectCallback,r=e.multiVarSelect,n=e.unfilteredData,a=(y=(0,o.useState)(r&&Object.keys(r).map((function(e){return{id:e,value:e}}))),m=2,function(e){if(Array.isArray(e))return e}(y)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(y,m)||function(e,t){if(e){if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(y,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],d=a[1];var y,m;if(!n||!n[0])return null;if(n&&0===Object.keys(n[0].properties).filter((function(e){return!(0,l.isEmptyOrSpaces)(e)})).length)return o.default.createElement("h3",null,"There are no columns to inspect or filter.");var h=(0,u.describeFeatureVariables)(n[0].properties),b=Object.keys(n[0].properties).map((function(e){return{id:(0,i.humanize)(e)+" ["+h[e].name+"]",value:e}})),g=Array.from(new Set(s.map((function(e){return e.value})).concat(Object.keys(r))));return g=g.map((function(e){return{id:(0,i.humanize)(e)+" ["+h[e].name+"]",value:e}})),o.default.createElement("div",{style:e.style},"Column to filter:",o.default.createElement(c.Select,{labelKey:"id",valueKey:"value",placeholder:"Chose column ("+b.length+")",maxDropdownHeight:"300px",type:c.TYPE.search,multi:!0,onChange:function(e){var n=e.value,o=n.map((function(e){return e.value}));Object.keys(r).map((function(e){o.includes(e)||delete r[e]})),"function"===typeof t&&t(r),d(n)},value:g,options:b}),g&&g.map((function(e){return e.value})).map((function(e){var a=[];return n.forEach((function(t){return Object.keys(t.properties).forEach((function(r){return r===e&&t.properties[e]&&!a.includes(t.properties[e])&&a.push(t.properties[e])}))})),o.default.createElement(o.default.Fragment,{key:e},(0,i.humanize)(e),o.default.createElement(f.default,{title:"Available ("+a.length+")",filter:e,multiVarSelect:r,values:a.map((function(e){return{id:e+"",value:e+""}})),onSelectCallback:function(e){"function"===typeof t&&t(e.selected||{})},value:r[e]&&Array.from(r[e]).map((function(e){return{id:e+"",value:e+""}}))}))})))};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0));r(490);var a,i=r(61),l=r(69),u=r(136),c=r(236),f=(a=r(198))&&a.__esModule?a:{default:a};function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},490:function(e,t,r){},491:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(u=(0,o.useState)(0),c=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(u,c)||function(e,t){if(e){if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(u,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],i=e.colourCallback;var u,c;return o.default.createElement("div",{className:"color-picker-container"},o.default.createElement("p",null,"Color:"),a.colorRangeNames.map((function(e,t){return o.default.createElement("div",{key:e,style:{backgroundColor:0===t?"red":1===t?"blue":2===t?"green":3===t?"orange":4===t?"brown":"yellow"},className:"color-box"+(r===t?" color-box-active":""),onClick:function(){n(t),"function"===typeof i&&i(e)}})})))};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(61);function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},492:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(91),i=r(318);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=u(o.useState(!1),2),r=t[0],n=t[1],l=e.toggleOpen,c=e.title,f=e.component,s=e.button;return o.createElement(o.Fragment,null,o.createElement("i",{style:{margin:5,cursor:"pointer",fontSize:"1.5em"},onClick:function(){"function"===typeof l&&l(),n(!0)},className:s||"fa fa-table"}),o.createElement(i.Modal,{size:"80%",onClose:function(){"function"===typeof l&&l(),n(!1)},isOpen:r},o.createElement(i.ModalHeader,null,c),o.createElement(i.ModalBody,null,f),o.createElement(i.ModalFooter,null,o.createElement(a.Button,{kind:a.KIND.secondary,size:a.SIZE.compact,onClick:function(){n(!1),"function"===typeof l&&l()}},"Okay"))))}},493:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(f=o.default.useState(1),s=2,function(e){if(Array.isArray(e))return e}(f)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(f,s)||function(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(f,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],c=e.data;var f,s;if(!c||0===c.length)return null;var p=Math.floor(c.length/10),d=Object.keys(c[0].properties).map((function(e){return(0,l.humanize)(e)})),y=c.slice(10*r,10*r+10).map((function(e){return Object.keys(e.properties).map((function(t){return e.properties[t]}))}));return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.Pagination,{numPages:p,currentPage:r,onPageChange:function(e){var t=e.nextPage;n(Math.min(Math.max(t,1),p))}}),o.default.createElement(a.Table,{columns:d,data:y}),o.default.createElement(i.Pagination,{numPages:p,currentPage:r,onPageChange:function(e){var t=e.nextPage;n(Math.min(Math.max(t,1),p))}}))};var n,o=(n=r(0))&&n.__esModule?n:{default:n},a=r(395),i=r(538),l=r(61);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},494:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=m((0,o.useState)(!1),2),r=t[0],n=t[1],l=m((0,o.useState)(!1),2),c=l[0],s=l[1],p=m((0,o.useState)([]),2),d=p[0],y=p[1],O=e.data,S=e.onSelectCallback,w=e.dark,E=e.noAccordion,j=e.plotStyle,_=e.noLimit;if(!O||0===O.length)return null;var k=Object.keys(O[0].properties);return o.default.createElement("div",null,o.default.createElement("h6",null,"Generate graphs from columns"),o.default.createElement("div",{className:"searchField"},o.default.createElement(u.default,{single:!0,title:"Choose column",values:k.map((function(e){return{id:(0,f.humanize)(e),value:e}})),onSelectCallback:function(e){n(e),"function"===typeof S&&S(e)},value:r}),r.length>0&&o.default.createElement(u.default,{single:!0,title:"Choose vis",values:g.map((function(e){return{id:e,value:e}})),onSelectCallback:function(e){s(e)},value:c})),o.default.createElement(a.Button,{kind:a.KIND.secondary,size:a.SIZE.compact,onClick:function(){var e;0!==r.length&&0!==c.length&&r[0]&&y([].concat(function(e){if(Array.isArray(e))return b(e)}(e=d)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[v(O,r[0].value,c[0].value,j,w,_)]))}},"Add"),o.default.createElement("div",{className:"visArea"},E?o.default.createElement("center",null,d.map((function(e,t){return e&&o.default.createElement("div",null,o.default.createElement(a.Button,{kind:a.KIND.secondary,size:a.SIZE.compact,onClick:function(){y(d.filter((function(e,r){return t!==r})))}},"X"),e)}))):o.default.createElement(i.Accordion,{expanded:!0,onChange:function(e){var t=e.expanded;return console.log(t)}},d.map((function(e,t){return o.default.createElement(i.Panel,{key:"panel-"+t},o.default.createElement(a.Button,{kind:a.KIND.secondary,size:a.SIZE.compact,onClick:function(){y(d.filter((function(e,r){return t!==r})))}},"X"),e)})))))};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(91),i=r(396),l=r(167),u=d(r(198)),c=d(r(515)),f=r(61),s=r(69),p=d(r(386));function d(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=["Vertical Bar","Horizontal Bar","Line","Pop. Pyramid","Treemap"];function v(e,t,r,n,a,i){if(e&&0!==e.length&&(0,s.isString)(t)&&(0,s.isString)(r)){var u=(0,f.xyObjectByProperty)(e,t);return"Treemap"===r?o.default.createElement(c.default,{plotStyle:n,data:{title:t+" "+r,color:1,children:u.map((function(t,r){return{name:t.x,size:+t.y/e.length,color:(0,s.isNumber)(t.x)||r,style:{border:"thin solid red"}}}))},title:(0,f.humanize)(t)}):r.startsWith("Vertical")||r.startsWith("Horizontal")||r.startsWith("Line")?o.default.createElement(p.default,{dark:i,noLimit:a,plotStyle:n,data:u,type:r.startsWith("Vertical")?l.VerticalBarSeries:r.startsWith("Horizontal")?l.HorizontalBarSeries:l.LineSeries,title:(0,f.humanize)(t),noYAxis:!0}):void 0}}},515:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(p=(0,o.useState)(!1),d=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(p,d)||function(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(p,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],a=e.data,i=e.plotStyle,l=e.title,s={animation:{damping:9,stiffness:300},data:a,onLeafMouseOver:function(e){return n({hoveredNode:e})},onLeafMouseOut:function(){return n({hoveredNode:!1})},mode:"squarify",getLabel:function(e){return e.name},width:i&&i.width||f+50,height:i&&i.height||f};var p,d;return a&&0!==a.length?o.default.createElement("div",{className:"dynamic-treemap-example"},o.default.createElement("h6",null,l),o.default.createElement(c,s),r&&r.value):null};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(167),i=r(151);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=(0,a.makeWidthFlexible)(a.Treemap),f=i.PLOT_W},516:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.layerName,r=e.columnNames,s=e.onLayerOptionsCallback,p=m(n.default.useState((0,a.getLayerProps)(t)),2),h=p[0],b=p[1],g=m(n.default.useState({}),2),v=g[0],O=g[1];return n.default.useEffect((function(){if(e.layerName){var t=(0,a.getLayerProps)(e.layerName);t&&(b(t),O({}))}}),[e.layerName]),h&&Object.keys(h)?n.default.createElement(f.Accordion,null,n.default.createElement(f.Panel,{title:"Settings: "+t},n.default.createElement("div",{style:{minWidth:220}},Object.keys(h).map((function(e){var t=h[e].type;return(0,l.isString)(t)&&function(e,t){if("class"===t)return null;switch(e){case"number":return n.default.createElement(n.default.Fragment,{key:t},t,n.default.createElement(u.Slider,{value:v[t]&&[v[t]]||[h[t].default],min:h[t].min,max:h[t].max,step:h[t].step,onChange:function(e){var r=e.value,n=d(d({},v),{},y({},t,r[0]));O(n),"function"===typeof s&&s(n)}}));case"boolean":return n.default.createElement(c.Checkbox,{key:t,checked:v.hasOwnProperty(t)?v[t]:h[t].value,onChange:function(){var e=d(d({},v),{},y({},t,!v[t]));O(e),"function"===typeof s&&s(e)}},(0,i.humanize)(t));default:return n.default.createElement(n.default.Fragment,{key:t},t,n.default.createElement(o.default,{title:(0,i.humanize)(t),single:!0,values:r&&r.map((function(e){return{id:(0,i.humanize)(e),value:e}})),onSelectCallback:function(e){var r=d({},v);r[t]=h[t].default,e.length&&(r[t]=function(r){var n="number"===h[t].value,o=r&&r.properties&&r.properties[e[0].value];return(0,l.isStringNumeric)(o)&&n&&(o=+o),o}),O(r),"function"===typeof s&&s(r)}}))}}(t,e)}))))):null};var n=s(r(0)),o=s(r(198)),a=r(303),i=r(61),l=r(69),u=r(235),c=r(234),f=r(396);function s(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},518:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(h=(0,a.useState)(!1),b=2,function(e){if(Array.isArray(e))return e}(h)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(h,b)||function(e,t){if(e){if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(h,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],o=e.notEmpty,s=e.map,p=e.deck;var h,b;return o?a.default.createElement(i.StatefulPopover,{placement:"top",dismissOnEsc:!1,dismissOnClickOutside:!0,accessibilityType:"tooltip",content:function(t){var r=t.close;return a.default.createElement(l.Block,{padding:"5px","data-html2canvas-ignore":"true"},(0,c.iWithFaName)("fa fa-times",r),a.default.createElement(f.default,{map:s,deck:p}),o&&y(e.data),(0,c.iWithFaName)("fa fa-copy",(function(){window.location&&m(window.location.href,(function(e){e?(n("Link copied to clipboard"),r()):window.prompt("Copy to clipboard: Ctrl+C, Enter",window.location.href)}))})))}},a.default.createElement("i",{role:"button",alt:"save, download or share"},(0,c.iWithFaName)("fa fa-share-alt-square",void 0),r&&a.default.createElement(u.Notification,{overrides:{Body:{style:{width:"auto"}}},kind:u.KIND.positive,autoHideDuration:3e3,onClose:function(){return n(!1)}},(function(){return r})))):a.default.createElement(f.default,{map:s,deck:p})};var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),i=r(233),l=(r(549),r(548)),u=r(398),c=r(61),f=(o=r(519))&&o.__esModule?o:{default:o},s=r(69);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e,t){return a.default.createElement("span",{onClick:function(){var r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:e})),n=document.getElementById("tgve-span-download");n.setAttribute("href",r),n.setAttribute("download",t||"tgve-data.geojson"),n.click()}},a.default.createElement("a",{id:"tgve-span-download",style:{display:"none"}}),a.default.createElement("i",{style:{margin:5,cursor:"pointer",fontSize:"1.5em"},className:"fa fa-download"}))},m=function(e,t){(0,s.isString)(e)&&(navigator.clipboard?navigator.clipboard.writeText(e).then((function(){"function"===typeof t&&t(!0)}),(function(e){"function"===typeof t&&t(!1)})):"function"===typeof t&&t(!1))}},519:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s(o.useState(!1),2),r=t[0],n=t[1],f=s(o.useState(!1),2),p=f[0],y=f[1],m=s(o.useState(!1),2),h=m[0],b=m[1],g=s(o.useState(!1),2),v=g[0],O=g[1],S=e.map,w=e.deck;return o.useEffect((function(){r&&(b((function(e){return!e})),(0,c.screenshot)(S,w,!v,(function(e){var t=e.toDataURL("image/png").replace("image/png","image/octet-stream");y(t),b((function(e){return!e}))})))}),[r,v]),o.createElement(o.Fragment,null,(0,c.iWithFaName)("fa fa-save",(function(){return n((function(e){return!e}))})),o.createElement(u.Modal,{isOpen:r},o.createElement(u.ModalHeader,{"data-html2canvas-ignore":"true"},h?o.createElement(i.Spinner,null):"Screenshot Preview"),o.createElement(u.ModalBody,{"data-html2canvas-ignore":"true"},o.createElement(a.Card,{overrides:{Root:{style:{width:"100%"}}},headerImage:p})),o.createElement(u.ModalFooter,{"data-html2canvas-ignore":"true"},o.createElement(l.Checkbox,{"data-html2canvas-ignore":"true",checked:v,onChange:function(e){return O(e.target.checked)}},"No sidebar"),d("Download",(function(){var e=document.createElement("a");e.download="tgve-screenshot.png",e.href=p,e.click()})),d("Close",(function(){return n(!1)})))))};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(546),i=r(319),l=r(234),u=r(318),c=r(61);function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e,t){return o.createElement(u.ModalButton,{"data-html2canvas-ignore":"true",kind:"tertiary",onClick:t},e)}},520:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(r(0)),a=r(167),i=r(136),l=r(61),u=r(521),c=s(r(523)),f=s(r(386));function s(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(m,e);var t,r,n,s=y(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=s.call(this,e)).state={multiVarSelect:e.multiVarSelect},t}return t=m,(r=[{key:"shouldComponentUpdate",value:function(e){var t=this.props.data;if(!t&&!e.data)return!1;var r=Math.floor(Math.random()*t.length);return t.length!==e.data.length||JSON.stringify(t[r])!==JSON.stringify(e.data[r])}},{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=t.column,s=t.dark,p=t.onSelectCallback,d=this.state.multiVarSelect;if(!r||!r.length)return null;var y=r&&r.length>1,m=y?(0,i.arrayPlotProps)(r,n):[],h=(0,i.propertyCount)(r,"accident_severity"),b=[];return o.default.createElement(o.default.Fragment,null,b.length>1&&o.default.createElement(c.default,{data:b}),h&&h.map((function(t){return(0,l.percentDiv)(t.x,100*t.y/r.length,(function(){d&&d.accident_severity&&d.accident_severity.has(t.x)?delete d.accident_severity:(d.accident_severity=new Set([t.x]),e.setState({multiVarSelect:d})),p&&p(0===Object.keys(d).length?{what:""}:{what:"multi",selected:d})}),s)})),y&&(0,u.plotByProperty)(r.filter((function(e){return Boolean(e.properties.age_of_casualty)})),"age_of_casualty",s,void 0,!0),(0,u.plotByPropertyByDate)(r,"sex_of_casualty",s),o.default.createElement(f.default,{dark:s,data:m.data,type:a.VerticalBarSeries,onValueClick:function(t){d[n||barChartVariable]=new Set([t.x+""]),e.setState({multiVarSelect:d}),p&&p({what:"multi",selected:d})},onDragSelected:function(t){d[n||barChartVariable]=new Set(t.map((function(e){return e+""}))),e.setState({multiVarSelect:d}),p&&p({what:"multi",selected:d})},plotStyle:{marginBottom:100},noYAxis:!0}),(0,u.popPyramidPlot)({data:r,dark:s}))}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),m}(o.default.Component);t.default=b},521:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timePlot=t.popPyramidPlot=t.plotByPropertyByDate=t.plotByProperty=t.arrayOfYearAndProperty=void 0;var n=p(r(0)),o=r(167),a=r(152),i=r(136),l=r(69),u=r(151),c=r(61),f=r(316),s=p(r(388));function p(e){return e&&e.__esModule?e:{default:e}}var d=u.PLOT_W;t.plotByPropertyByDate=function(e,t,r){if(!e||!(0,l.isArray)(e)||!e.length||!t)return null;var o=y(e,t);return o?n.default.createElement(s.default,{dark:r,yaxis:{showgrid:!1},xaxis:{showgrid:!1},data:o.map((function(e,t){return{mode:"lines",showlegend:!1,x:e.map((function(e){return e.x})).sort((function(e,t){return new Date(e)-new Date(t)})),y:e.map((function(e){return e.y})),name:["Male","Female","Total"][t],marker:{color:(0,f.scaleSequential)(u.TURQUOISE_RANGE)(t/o.length)}}})),title:"Sex of Casualty"}):null};t.plotByProperty=function(e,t,r,o,a){if(!e||!(0,l.isArray)(e)||!e.length)return null;var i=!a&&e.length>10,f=e[0].properties.hasOwnProperty(t)&&(0,c.xyObjectByProperty)(i?e.slice(0,10):e,t);return f?n.default.createElement(n.default.Fragment,null,i&&n.default.createElement("h4",null,"Plotting first ",10," values:"),n.default.createElement(s.default,{dark:r,yaxis:{showgrid:!1},xaxis:{showgrid:!1},data:[{x:f.map((function(e){return e.x})),y:f.map((function(e){return e.y})),marker:{color:u.TURQUOISE_RANGE[0]},type:o||"lines"}],title:(0,c.humanize)(t)})):null};t.popPyramidPlot=function(e){if(e&&e.data&&e.data[0]&&e.data[0].properties.date&&e.data[0].properties.sex_of_casualty){var t=(0,i.propertyCountByProperty)(e.data,"sex_of_casualty","date"),r=[],l=[];if(1!==Object.keys(t).length)return t&&Object.keys(t).forEach((function(e,n){r.push({x:0,x0:+t[e].Male,y:0===n?0:n,y0:n+1,color:"#428BCA"})})),t&&Object.keys(t).forEach((function(e,r){l.push({x:0,x0:-1*+t[e].Female,y:0===r?0:r,y0:r+1})})),n.default.createElement(n.default.Fragment,null,n.default.createElement(o.XYPlot,{margin:{left:e.margin||60},height:e.plotStyle&&e.plotStyle.height||d,width:e.plotStyle&&e.plotStyle.width||d},n.default.createElement(o.HorizontalRectSeries,{color:"rgb(18, 147, 154)",stroke:"black",data:l}),n.default.createElement(o.HorizontalRectSeries,{color:"rgb(239, 93, 40)",stroke:"black",data:r}),n.default.createElement(o.YAxis,{tickSize:0,tickFormat:function(e){return 0===e?2009:e-2+2009},style:{line:{strokeWidth:0},text:{fill:e.dark?"#fff":"#000",fontWeight:400}}}),n.default.createElement(o.XAxis,{tickSize:0,tickFormat:function(e){return(0,a.format)(".2s")(e<0?-1*e:e)},style:{line:{strokeWidth:0},text:{fill:e.dark?"#fff":"#000",fontWeight:400}}})),n.default.createElement(o.DiscreteColorLegend,{orientation:"horizontal",width:d,items:[{title:"Male",color:"rgb(239, 93, 40)"},{title:"Female",color:"rgb(18, 147, 154)"}]}))}};var y=function(e,t){var r=(0,l.isArray)(e)&&e.length>0&&t,n=[[],[],[]];if(r){var o=1===e.length?0:Math.floor(Math.random()*(e.length-1)+1),a=Object.keys(e[o].properties).filter((function(t){return(0,c.isStringDate)(e[o].properties[t])}));if(a.length>0){var u=(0,i.propertyCountByProperty)(e,t,a[0]);u&&Object.keys(u).length>1&&Object.keys(u).forEach((function(e){e&&u[e].Male&&u[e].Female&&(n[0].push({x:e,y:u[e].Male}),n[1].push({x:e,y:u[e].Female}),n[2].push({x:e,y:u[e].Male+u[e].Female}))}))}}return n[0].length?n:null};t.arrayOfYearAndProperty=y;t.timePlot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.property,o=e.dark,a=e.title,u=e.height,f=e.width,p=e.onClickCallback;if(!(0,l.isString)(r)||!t||!t.length)return null;var d=(0,c.getFirstDateColumnName)(t[0].properties);if(!d)return null;var y=(0,i.getPropertyValues)({features:t},d).map((function(e){return new Date(e)})),m=(0,i.getPropertyValues)({features:t},r);return n.default.createElement(s.default,{dark:o,height:u,width:f,title:a||d+" v "+r,yaxis:{showgrid:!1},xaxis:{showgrid:!1},data:[{x:y,y:m,mode:"graph"}],onClickCallback:p})}},522:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(n,t);var r=function(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}(n);function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=r.call(this,e)).p=Promise.resolve(),t.resizeHandler=null,t.handlers={},t.syncWindowResize=t.syncWindowResize.bind(s(t)),t.syncEventHandlers=t.syncEventHandlers.bind(s(t)),t.attachUpdateEvents=t.attachUpdateEvents.bind(s(t)),t.getRef=t.getRef.bind(s(t)),t.handleUpdate=t.handleUpdate.bind(s(t)),t.figureCallback=t.figureCallback.bind(s(t)),t.updatePlotly=t.updatePlotly.bind(s(t)),t}return function(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"updatePlotly",value:function(t,r,n){var o=this;this.p=this.p.then((function(){if(!o.unmounting){if(!o.el)throw new Error("Missing element reference");return e.react(o.el,{data:o.props.data,layout:o.props.layout,config:o.props.config,frames:o.props.frames})}})).then((function(){o.unmounting||(o.syncWindowResize(t),o.syncEventHandlers(),o.figureCallback(r),n&&o.attachUpdateEvents())})).catch((function(e){o.props.onError&&o.props.onError(e)}))}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(e){this.unmounting=!1;var t=e.frames&&e.frames.length?e.frames.length:0,r=this.props.frames&&this.props.frames.length?this.props.frames.length:0,n=!(e.layout===this.props.layout&&e.data===this.props.data&&e.config===this.props.config&&r===t),o=void 0!==e.revision,a=e.revision!==this.props.revision;(n||o&&(!o||a))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&m&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),e.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&y.forEach((function(t){e.el.on(t,e.handleUpdate)}))}},{key:"removeUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&y.forEach((function(t){e.el.removeListener(t,e.handleUpdate)}))}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(e){if("function"===typeof e){var t=this.el;e({data:t.data,layout:t.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(t){var r=this;m&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return e.Plots.resize(r.el)},window.addEventListener("resize",this.resizeHandler),t&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(e){this.el=e,this.props.debug&&m&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var e=this;d.forEach((function(t){var r=e.props["on"+t],n=e.handlers[t],o=Boolean(n);r&&!o?e.addEventHandler(t,r):!r&&o?e.removeEventHandler(t):r&&o&&r!==n&&(e.removeEventHandler(t),e.addEventHandler(t,r))}))}},{key:"addEventHandler",value:function(e,t){this.handlers[e]=t,this.el.on(this.getPlotlyEventName(e),this.handlers[e])}},{key:"removeEventHandler",value:function(e){this.el.removeListener(this.getPlotlyEventName(e),this.handlers[e]),delete this.handlers[e]}},{key:"getPlotlyEventName",value:function(e){return"plotly_"+e.toLowerCase()}},{key:"render",value:function(){return a.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),n}(a.Component);return t.propTypes={data:i.default.arrayOf(i.default.object),config:i.default.object,layout:i.default.object,frames:i.default.arrayOf(i.default.object),revision:i.default.number,onInitialized:i.default.func,onPurge:i.default.func,onError:i.default.func,onUpdate:i.default.func,debug:i.default.bool,style:i.default.object,className:i.default.string,useResizeHandler:i.default.bool,divId:i.default.string},d.forEach((function(e){t.propTypes&&(t.propTypes["on"+e]=i.default.func)})),t.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},t};var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),i=(o=r(1))&&o.__esModule?o:{default:o};function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],y=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],m="undefined"!==typeof window},523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(0))&&n.__esModule?n:{default:n},a=r(92),i=r(69),l=r(61);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r(524);t.default=function(e){var t=e.data,r=e.lineAttrs,n=e.plotStyle;if(!t||!Array.isArray(t)||0===t.length)return null;var c=!0;if(t.forEach((function(e){(0,i.isNumber)(e)||(c=!1)})),!c)return null;var f=n&&n.height||100,s=t.sort(a.ascending);s=s.map((function(e){return(0,l.convertRange)(e,{oldMax:s[s.length-1],oldMin:s[0],newMax:95,newMin:5})}));var p=+(0,a.quantile)(s,.25).toFixed(2),d=+(0,a.quantile)(s,.5).toFixed(2),y=+(0,a.quantile)(s,.75).toFixed(2),m=+(y-p).toFixed(2),h=+(p-1.5*m).toFixed(2),b=+(p+1.5*m).toFixed(2),g=s.filter((function(e){return e>b||e<h})),v=t;return t.length>5&&(v=[],t.forEach((function(e,r){var n=Math.floor(t.length/5);if(1===n&&(n=2),r%n===0){var o=Math.floor(e);o>1e3&&(o=(o/1e3).toFixed(1)+"k"),v.push(o)}}))),o.default.createElement("div",{style:{width:"100%",height:f,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}},o.default.createElement("div",{style:{width:"100%",height:"100%",maxWidth:"600px"}},o.default.createElement("svg",{width:"100%",height:"100%"},o.default.createElement("g",{style:{stroke:n&&n.lineColor||"rgb(18, 147, 154)"}},o.default.createElement("line",u({x1:h+"%",x2:p+"%",y1:"35%",y2:"35%"},r)),o.default.createElement("line",u({style:{strokeWidth:1},x1:h+"%",x2:h+"%",y1:"5%",y2:"65%"},r)),o.default.createElement("line",u({x1:b+"%",x2:y+"%",y1:"35%",y2:"35%"},r)),o.default.createElement("line",u({style:{strokeWidth:1},x1:b+"%",x2:b+"%",y1:"5%",y2:"65%"},r)),o.default.createElement("rect",{x:p+"%",width:m+"%",y:"5%",height:"60%",fill:n&&n.fillColor||"rgb(18, 147, 154)",stroke:"black 0.5px"}),o.default.createElement("line",u({style:{stroke:"black",strokeWidth:1},x1:d+"%",x2:d+"%",y1:"5%",y2:"65%"},r)),g.map((function(e,t){return o.default.createElement("circle",{key:e+"-"+t,r:"5",cx:(e>b?e+2:e-2)+"%",cy:"35%",style:{fill:"none",opacity:1}})})),v&&v.map((function(e,t){var r=t*(100/v.length);return o.default.createElement("g",{key:r+"-"+t},o.default.createElement("text",{x:r+2+"%",y:"85%",className:"d3-axis-labels"},e))}))))))}},524:function(e,t,r){},525:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.headerComponent=void 0;var n,o=(n=r(0))&&n.__esModule?n:{default:n},a=r(393);t.headerComponent=function(e){var t=(0,a.styled)("div",(function(e){return{backgroundColor:e.$theme.colors.backgroundTertiary,padding:"10px",borderRadius:"5px",marginBottom:"20px"}}));return o.default.createElement(t,null,e)}},526:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),i=(o=r(527))&&o.__esModule?o:{default:o},l=r(136);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=c((0,a.useState)(!1===e.isMobile),2),r=t[0],n=t[1];(0,a.useEffect)((function(){!0!==e.open&&n(e.open)}),[e.open]);var o=e.data,u=o&&o.length>1;return u&&"POINT"===o[0].geometry.type.toUpperCase()?a.default.createElement("div",{style:{marginRight:r?0:-350},className:"right-panel-container"},a.default.createElement("div",{className:"close-button",onClick:function(){return n(!r)},style:{color:"white"}},a.default.createElement("i",{style:{marginLeft:-16,bottom:0,position:"absolute",backgroundColor:"#242730",fontSize:"2rem",color:"white !important"},className:r?"fa fa-arrow-circle-right":"fa fa-arrow-circle-left"})),a.default.createElement("div",{className:"right-side-panel"},u&&a.default.createElement(i.default,{data:(0,l.coordsAsXY)({features:o}),options:{noXAxis:!0,noYAxis:!0}}))):null}},527:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r(0)),a=r(235),i=r(167);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(p,e);var t,r,n,l=s(p);function p(){var e;u(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(d(e=l.call.apply(l,[this].concat(r))),"state",{hoveredNode:null,radius:10,offset:0}),e}return t=p,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=t.options,l=this.state.radius;return r&&r.length?o.default.createElement("div",{className:"centered-and-flexed",style:{color:"#fff"}},o.default.createElement(a.Slider,{value:[this.state.radius],min:5,max:50,step:5,onChange:function(t){var r=t.value;e.setState({radius:r[0]})}}),"Radius (pixels)",o.default.createElement(i.XYPlot,{margin:{left:10,bottom:10},height:n&&n.plotStyle&&n.plotStyle.height||350,width:n&&n.plotStyle&&n.plotStyle.width||350,onMouseLeave:function(){return e.setState({hoveredNode:null})}},o.default.createElement(i.HexbinSeries,{animation:!0,className:"hexbin-example",style:{stroke:"#125C77",strokeLinejoin:"round"},colorRange:["orange","cyan"],radius:l,data:r}),n&&!n.noXAxis&&o.default.createElement(i.XAxis,{tickLabelAngle:-45,style:{text:{fill:"#fff",fontWeight:400}}}),n&&!n.noYAxis&&o.default.createElement(i.YAxis,{tickLabelAngle:-45,style:{text:{fill:"#fff",fontWeight:400}}}))):null}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(o.Component);t.default=h},528:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(r(0)),a=r(91),i=l(r(529));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(p,e);var t,r,n,l=s(p);function p(){return u(this,p),l.apply(this,arguments)}return t=p,(r=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this._handleWindowSizeChange.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._handleWindowSizeChange.bind(this))}},{key:"_handleWindowSizeChange",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this.props.onCloseCallback;return this.props.popup?o.default.createElement("div",{style:{bottom:50,right:50,position:"absolute"}},o.default.createElement(a.Button,{kind:a.KIND.minimal,onClick:function(){return"function"===typeof e&&e()}},"X"),o.default.createElement("div",null,(0,i.default)(this.props))):(0,i.default)(this.props)}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(o.default.Component);t.default=y},529:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(0)),o=r(316),a=r(395),i=r(136),l=r(61),u=r(151),c=r(69),f=s(r(388));function s(e){return e&&e.__esModule?e:{default:e}}var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(!e.properties&&(!e.points||e.points&&!e.points[0].source.properties))return null;var o=[],i=e.properties;if(i){var u=Object.keys(i);o=u.slice(0,t?u.length:r).map((function(e){return[(0,l.humanize)(e),i[e]]}))}else{var c=Object.keys(e.points[0].source.properties);o=c.slice(0,t?c.length:r).map((function(t){var r=[(0,l.humanize)(t),e.points[0].source.properties[t]];return e.points[1]&&r.push(e.points[1].source.properties[t]),r}))}return n.default.createElement(a.Table,{style:{maxWidth:"320px"},columns:e.points&&2===e.points.length?["Property","Value p1","Value p2"]:["Property","Value"],data:o})},d=function(e){var t=e.topx,r=e.topy,a=e.selectedObject,s=e.column1,d=void 0===s?"accident_severity":s,y=e.column2,m=void 0===y?"date":y,h=(0,c.isObject)(e)&&e.isMobile;if(!a)return null;var b=a.type&&"Feature"===a.type,g=a&&a.cluster,v=[];if(!b&&!g){var O=d&&(0,i.getPropertyValues)({features:a.points.map((function(e){return e.source}))},d),S=d&&m&&(0,i.propertyCountByProperty)(a.points.map((function(e){return e.source})),d,m);O&&O.forEach((function(e,t){Object.keys(S).forEach((function(r){r&&S[r][e]&&(v[t]||(v[t]={x:[],y:[],name:e,marker:{color:(0,o.scaleSequential)(u.TURQUOISE_RANGE)(t/O.length)}}),v[t].x.push(r),v[t].y.push(S[r][e]))}))})),v.map((function(e){e.x.length>1&&(e.mode="lines")}))}var w=window.innerWidth,E=window.innerHeight,j={top:r+300>E?h?10:r+300>E?r-220:r:r,left:t+220>w?h?10:t+220>w?t-220:t:t};return e.popup&&(j.position="inherit"),n.default.createElement("div",{className:"xyz",style:j},n.default.createElement("div",null,n.default.createElement("b",null,"Total: ",g?a.point_count:b?1:a.points.length)),n.default.createElement("div",null,!g&&(b||a.points.length<=2)?p(a):n.default.createElement(f.default,{title:"".concat((0,l.humanize)(d)," by ").concat((0,l.humanize)(m)),width:220,data:v,dark:!0,xaxis:{tickformat:"d",showgrid:!1},yaxis:{showgrid:!1}})))};t.default=d},530:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initViewState=t.getViewPort=t.generateLayer=void 0;var n=m(r(0)),o=r(391),a=m(r(543)),i=r(52),l=m(r(531)),u=m(r(193)),c=r(392),f=r(61),s=r(151),p=r(136),d=r(532),y=r(69);function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e,t,r,n){var o=n,a=r;return(r<1||n>300)&&(o=10,a=1),(0,f.convertRange)(e.properties[t],{oldMin:r,oldMax:n,newMax:o,newMin:a})};t.generateLayer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=e.layerOptions,l=void 0===i?{}:i,u=e.filter,c=e.cn,y=e.customError;if(u&&"mapstyle"===u.what){var m="mapbox://styles/mapbox/"+u.selected+"-v9";return{mapStyle:"mapstyle"===u.what?"No map"===u.selected?s.BLANKSTYLE:m:r.mapStyle}}var h=r.colorName,g=r.iconLimit,w=r.geography,E=r.geographyColumn,j=r.multiVarSelect,_=t.data&&t.data.features||r.data&&r.data.features;if(_){if(u&&"%"===u.what&&(_=_.slice(0,u.selected/100*_.length)),(r.coords||u&&"column"===u.what)&&(_=r.filtered),w){if(!(_=(0,f.setGeojsonProps)(w,_,E))||!_.features)return{alert:{content:"Is there a matching geography column?"}};_=_.features||_}if(!(_=O(_,u,r,j))||!_.length)return{loading:!1,alert:{content:"Filtering returns no results"}};var k=u&&"column"===u.what&&u.selected||r.column,P=k||0,C=(0,p.sfType)(w?w.features[0]:_[0]).toLowerCase(),x=u&&"layerName"===u.what&&u.selected||r.layerName||(0,f.suggestDeckLayer)(w?w.features:_),M=_.length<g&&!x&&(!u||"layerName"!==u.what)&&"point"===C;M&&(x="icon");var A=Object.assign(b(b({},r.layerOptions),{},{lightSettings:s.LIGHT_SETTINGS,colorRange:(0,f.colorRanges)(c||h),getColor:(0,f.getColorArray)(c||h)}),l),R=(0,f.generateDomain)(_,0===P?Object.keys(_[0].properties)[P]:P);if("heatmap"===x&&(A.getPosition=function(e){return e.geometry.coordinates},A.updateTriggers={getWeight:"function"===typeof A.getWeight&&_.map((function(e){return A.getWeight(e)}))}),"scatterplot"===x&&S(_,P)){var N=(0,f.getMin)(R),T=(0,f.getMax)(R);A.getRadius=function(e){return v(e,P,N,T)}}if("arc"===x){var L=(0,f.getMin)(R),D=(0,f.getMax)(R);A.getSourceColor=(0,f.colorScale)(L,R,180,c||r.colorName),A.getTargetColor=(0,f.colorScale)(D,R,180,c||r.colorName)}var I=r.legend,z=function(e){return+P||0===+P?e.properties[Object.keys(e.properties)[P]]:e.properties[P]},W=function(e){return(0,f.colorScale)(+z(e)?+z(e):z(e),R,180,c||r.colorName)};if("linestring"===C){if(A.getColor=W,A.getPath=function(e){return e.geometry.coordinates},A.onClick=function(e){e&&e.hasOwnProperty("coordinate")&&["path","arc","line"].includes(x)&&e.object.geometry.coordinates&&"function"===typeof a&&a({filter:{what:"coords",selected:e.object.geometry.coordinates[0]}})},S(_,P)){var B=(0,f.getMin)(R),F=(0,f.getMax)(R);A.getWidth=function(e){return v(e,P,B,F)}}A.updateTriggers={getColor:_.map((function(e){return W(e)}))}}"polygon"!==C&&"multipolygon"!==C&&"geojson"!==x&&"scatterplot"!==x||(A.getFillColor=W,A.updateTriggers={getFillColor:_.map((function(e){return W(e)}))}),"pointcloud"!==x&&"barvis"!==x||(A.getColor=W,A.updateTriggers={getColor:_.map((function(e){return W(e)})),getPosition:[_.length]});var U=+P||0===+P?Object.keys(_[0].properties)[P]:P;I=(0,f.generateLegend)({domain:R,title:(0,f.humanize)(U),interpolate:(0,f.colorRangeNamesToInterpolate)(c||r.colorName)});var V=(0,f.generateDeckLayer)(x,_,o,A);return{alert:M?{content:"Switched to icon mode. "}:y||null,loading:!1,layerName:x,geomType:C,tooltip:"",filtered:_,layers:[V],layerOptions:A,multiVarSelect:u&&"multi"===u.what?u.selected:j,road_type:u&&"road_type"===u.what?u.selected:r.road_type,colorName:c||h,column:k,coords:u&&"coords"===u.what?u.selected:r.coords,legend:I,bottomPanel:n.default.createElement(d.CustomSlider,{data:r.date&&r.data.features,dates:(0,p.getPropertyValues)(r.data,"alt")})}}};var O=function(e,t,r,n){var l=t&&"multi"===t.what||Object.keys(n).length,u=t&&"coords"===t.what,c=t&&"boundsSubset"===t.what&&(0,f.getBbx)(t.bounds),s=c||{},d=s.xmin,y=s.ymin,m=s.xmax,h=s.ymax,b=c&&(0,i.polygon)([[[d,y],[d,h],[m,h],[m,y],[d,y]]]);if(!l&&!u&&!c)return e;var g=t&&"multi"===t.what&&t.selected||n;return e.filter((function(e){if(l)for(var n=0,i=Object.keys(g);n<i.length;n++){var f=i[n],s=e.properties[f]+"";if(!g[f].has(s))return!1}return(!u||0===(0,o.difference)(t.selected||r.coords,e.geometry.coordinates.flat()).length)&&!(c&&b&&e&&e.geometry&&"MultiPolygon"!==(0,p.sfType)(e)&&e.geometry.coordinates&&!(0,a.default)(b,e))}))},S=function(e,t){if(!(0,y.isArray)(e))return null;if(!(0,o.isString)(t)&&!(0,y.isNumber)(t))return null;var r=Math.floor(Math.random()*e.length);return+(e[r]&&e[r].properties&&e[r].properties[t])};t.initViewState=function(e){var t=e.viewport,r=e.layerName,n=t&&Object.keys(t)?Object.assign(DECK_INIT,t):s.DECKGL_INIT,o=(0,f.getViewportParams)(e.location?e.location.search:window.location.search);return o&&Object.keys(o).forEach((function(e){Object.keys(n).forEach((function(t){t.startsWith(e)&&(n[e]=o[e])}))})),r&&new RegExp(s.LAYERS_2D_REGEX,"i").test(r)&&(n.pitch=0),n};t.getViewPort=function(e,t,r,n){var o=t||e.data;if(o&&0!==o.length||r){var a=r?r.bbox:(0,u.default)(o),i=r?[r.lon,r.lat]:(0,l.default)(o).geometry.coordinates;return n||n.fitBounds(a,{padding:100}),b(b({},e.viewport),{},{longitude:i[0],latitude:i[1],transitionDuration:500,transitionInterpolator:new c.FlyToInterpolator})}}},532:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomSlider=function(e){var t=p(n.default.useState([0]),2),r=t[0],a=t[1],i=p(n.default.useState([]),2),l=i[0],u=i[1],f=p(n.default.useState(null),2),s=f[0],d=f[1],y=p(n.default.useState("1000"),2),m=y[0],h=y[1];n.default.useEffect((function(){u(e.dates),a(e.dates&&[0])}),[e]),function(e,t){var r=n.default.useRef();n.default.useEffect((function(){r.current=e}),[e]),n.default.useEffect((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){a((function(e){return[(e[0]+1)%l.length]})),"function"===typeof b&&b(l[r[0]])}),s);var b=e.callback,g=e.data;return g&&g.length&&l?n.default.createElement("div",{style:{display:"flex",alignItems:"center"}},n.default.createElement("div",{style:{maxWidth:110}},n.default.createElement(o.Input,{value:m,onChange:function(e){return h(e.target.value)},placeholder:"Delay Input",type:"number",size:o.SIZE.mini,clearable:!0,clearOnEscape:!0,min:100,max:5e3,step:"50"})),n.default.createElement("i",{style:{maxHeight:40,maxWidth:40},onClick:function(){d(s?null:m)}},s?n.default.createElement("i",{style:{fontSize:"2em"},className:"fa fa-pause"}):n.default.createElement("i",{style:{fontSize:"2em"},className:"fa fa-play"})),n.default.createElement("div",{style:{flexGrow:1}},n.default.createElement(c.Slider,{value:r,min:0,max:e.dates.length-1,step:1,onChange:function(e){e.value?a(e.value):a([]),s&&d(null),"function"===typeof b&&b(l[e.value])},overrides:{ThumbValue:function(e){var t=e.$value;return n.default.createElement("div",{style:{position:"absolute",top:-20,backgroundColor:"transparent"}},l[t])},TickBar:function(e){var t=e.$min,r=e.$max;return n.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},[l[t],l[Math.floor(r/2)],l[r]].map((function(e){return n.default.createElement("div",{className:"slider-label",key:e},e)})))}}}))):null},t.yearSlider=void 0;var n=s(r(0)),o=r(200),a=s(r(533)),i=r(368),l=r(136),u=r(61),c=r(235),f=r(69);function s(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.yearSlider=function(e){var t=e.data,r=e.year,o=e.multiVarSelect,c=e.onSelectCallback,s=e.callback;if(!t||!t.length||!Object.keys(t[0].properties))return null;var p=(0,u.getFirstDateColumnName)(t[0].properties);if(!i.DateTime.fromISO(t[0].properties[p]).isValid)return null;var y=(0,l.getPropertyValues)({features:t},p).map((function(e){return i.DateTime.fromISO(e).year})).sort();return y&&(0,f.isArray)(y)&&y.length&&1!=y.length?n.default.createElement(a.default,{title:n.default.createElement("h5",null,"Year(s): ",r||y[0]+" - "+y[y.length-1],r&&n.default.createElement("i",{style:{fontSize:"2rem"},className:"fa fa-trash",onClick:function(){delete o[p],"function"===typeof c&&c(0===Object.keys(o).length?{what:""}:{what:"multi",selected:o}),s({year:"",multiVarSelect:o})}})),sublist:d(new Set(y)),suggested:"slider",onChange:function(e){o[p]=new Set([e+""]),s({year:e+"",multiVarSelect:o}),"function"===typeof c&&c({selected:o,what:"multi"})}}):null}},533:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=r(0))&&o.__esModule?o:{default:o},i=r(235),l=r(234),u=r(91),c=r(541),f=r(236),s=r(61);function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(m,e);var t,r,n,o=y(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=o.call(this,e)).state={checks:[]},t}return t=m,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.title,n=t.sublist,o=t.suggested,p=t.onChange,d=t.steps;if(!r||!n||0===n.length)return null;var y=this.state.checks,m=o||(0,s.suggestUIforNumber)(n.length),h=null;if("checkbox"===m)h=a.default.createElement(a.default.Fragment,null,n.map((function(t,r){return a.default.createElement(l.Checkbox,{key:t,checked:e.state.checks[r],value:t,onChange:function(){y[r]=!y[r],e.setState({checks:y})}},t)})));else if("slider"===m&&parseInt(n[0])){var b=n;h=a.default.createElement(a.default.Fragment,null,a.default.createElement(i.Slider,{value:this.state.value||[b[0]],min:parseInt(b[0]),max:parseInt(b[b.length-1]),step:d||1,onChange:function(t){var r=t.value;e.setState({value:r}),"function"===typeof p&&p(r[0])}}),r)}else h="buttongroups"===m?a.default.createElement(a.default.Fragment,null,"Checkbox Mode StatefulButtonGroup",a.default.createElement(c.StatefulButtonGroup,{mode:"checkbox",initialState:{selected:[0]}},n.map((function(e,t){return a.default.createElement(u.Button,{key:e+"-"+t,value:e,onClick:function(e){return console.log(e.target.value)}},e)})))):a.default.createElement(f.StatefulSelect,{options:n.map((function(e){return{id:e}})),labelKey:"id",placeholder:"Choose "+(0,s.humanize)(r),type:f.TYPE.search,onChange:function(e){return console.log(e&&e.value[0]&&e.value[0].id)}});return h}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),m}(a.default.Component);t.default=b},534:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.params=t.keySetObject=t.jsonStr=void 0;var n,o=(n=r(365))&&n.__esModule?n:{default:n},a=r(69);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.params=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="string"===typeof t&&o.default.parse(t.replace("?","")),n=document.getElementById("tgve-data")&&document.getElementById("tgve-data").textContent&&u(document.getElementById("tgve-data").textContent),a=document.getElementById("tgve-settings")&&document.getElementById("tgve-settings").textContent&&u(document.getElementById("tgve-settings").textContent)||{},f=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e[t];return r.hasOwnProperty(t)?o?l(r[t]):r[t]:o&&"boolean"===typeof i||!o&&i?i:a.hasOwnProperty(t)?o?l(a[t]):a[t]:Object({NODE_ENV:"production",PUBLIC_URL:"https://tgve.github.io/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibGF5aWsiLCJhIjoiY2ppNXFndGNzMGtpaDNxbXNqd2Rqc3BqZyJ9.355os6YWhIKPVaSiX01QIA",REACT_APP_DEFAULT_URL:"https://raw.githubusercontent.com/tgve/example-data/main/casualties.csv"}).hasOwnProperty(n)?o?l(Object({NODE_ENV:"production",PUBLIC_URL:"https://tgve.github.io/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibGF5aWsiLCJhIjoiY2ppNXFndGNzMGtpaDNxbXNqd2Rqc3BqZyJ9.355os6YWhIKPVaSiX01QIA",REACT_APP_DEFAULT_URL:"https://raw.githubusercontent.com/tgve/example-data/main/casualties.csv"})[n]):Object({NODE_ENV:"production",PUBLIC_URL:"https://tgve.github.io/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibGF5aWsiLCJhIjoiY2ppNXFndGNzMGtpaDNxbXNqd2Rqc3BqZyJ9.355os6YWhIKPVaSiX01QIA",REACT_APP_DEFAULT_URL:"https://raw.githubusercontent.com/tgve/example-data/main/casualties.csv"})[n]:void 0},s=function(e,t,r){return i(e)===t?e:r};return{defaultURL:f("defaultURL","REACT_APP_DEFAULT_URL"),geographyURL:f("geographyURL","REACT_APP_GEOGRAPHY_URL"),geographyColumn:f("geographyColumn","REACT_APP_GEOGRAPHY_COLUMN"),column:f("column","REACT_APP_COLUMN"),tooltipColumns:f("tooltipColumns","REACT_APP_TOOLTIP_COLUMNS"),layerName:f("layerName","REACT_APP_LAYER_NAME"),dark:s(f("dark","REACT_APP_DARK",!0),"boolean",!0),hideChartGenerator:f("hideChartGenerator","REACT_APP_HIDE_CHART_GENERATOR",!0),hideCharts:f("hideCharts","REACT_APP_HIDE_CHARTS",!0),hideSidebar:f("hideSidebar","REACT_APP_HIDE_SIDEBAR",!0),viewport:u(r.viewport)||e.viewport||a.viewport,data:u(r.data)||e.data||n,select:c(r.select)||e.select,leftSidebarContent:e.leftSidebarContent}};var l=function(e){return"true"===e||"false"!==e&&void 0},u=function(e){try{return JSON.parse(e)}catch(t){return!1}};t.jsonStr=u;var c=function(e){var t=u(e),r={};if((0,a.isObject)(t))return Object.keys(t).forEach((function(e){(0,a.isArray)(t[e])&&(r[e]=new Set(t[e]))})),r;if((0,a.isString)(e)){if(!new RegExp(/^[\w+._-\s\\(\\)]+:[\w+._-\s\\(\\)]+/).test(e))return null;var n=e.split(":");if(n.length<1)return null;for(var o=0;o<n.length;o+=2){var i=n[o+1]&&n[o+1].split(",");(0,a.isArray)(i)&&(r[n[o]]=new Set(i))}return r}return null};t.keySetObject=c},535:function(e,t,r){},547:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(203),i=r.n(a),l=(r(450),r(408)),u=r.n(l);r(535);var c=function(){return o.a.createElement(u.a,{defaultURL:"https://raw.githubusercontent.com/tgve/example-data/main/casualties.csv"})},f=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,586)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;r(e),n(e),o(e),a(e),i(e)}))};i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(c,null)),document.getElementById("root")),f()},61:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xyObjectByProperty=t.updateHistory=t.uniqueValuePercentage=t.theme=t.suggestUIforNumber=t.suggestDeckLayer=t.sortNumericArray=t.shortenName=t.setGeojsonProps=t.searchNominatom=t.screenshot=t.percentDiv=t.isURL=t.isStringDate=t.isMobile=t.iconJSType=t.iWithFaName=t.humanize=t.getViewportParams=t.getResultsFromGoogleMaps=t.getOSMTiles=t.getMin=t.getMax=t.getMainMessage=t.getFirstDateColumnName=t.getColorArray=t.getCentroid=t.getBbx=t.generateLegend=t.generateDomain=t.generateDeckLayer=t.firstLastNCharacters=t.fetchData=t.convertRange=t.colorScale=t.colorRanges=t.colorRangeNamesToInterpolate=t.colorRangeNames=t.checkURLReachable=t.COLOR_RANGE=void 0;var n=v(r(0)),o=r(536),a=r(316),i=r(391),l=v(r(364)),u=r(92),c=v(r(467)),f=v(r(365)),s=v(r(470)),p=v(r(151)),d=r(69),y=v(r(367)),m=v(r(471)),h=r(136),b=r(303),g=v(r(474));function v(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=r(368).DateTime;t.getResultsFromGoogleMaps=function(e,t){"string"===typeof e&&"function"===typeof t&&fetch("https://maps.googleapis.com/maps/api/geocode/json?address="+e+"&key=WRONG_KEY").then((function(e){200===e.status?e.json().then((function(r){0===r.results.length||"ZERO_RESULTS"===e.status?t(e.status):t(r.results[0].geometry.location)})):console.log("Looks like there was a problem. Status Code: "+e.status)})).catch((function(e){console.log("Fetch Error :-S",e)}))};var P=function(e,t){fetch(e).then((function(e){return e.text()})).then((function(r){if((0,d.isString)(e)&&e.endsWith("zip"))"function"===typeof shp?shp(e).then((function(e){"function"===typeof t&&t(e)})):t(void 0,new Error(e+"Function 'shp' is not in context."));else if((0,d.isString)(e)&&e.endsWith("csv"))l.default.csv2geojson(r,(function(e,r){e||"function"===typeof t&&t(r)}));else try{var n=JSON.parse(r);t(n)}catch(o){t(void 0,o)}})).catch((function(e){console.error(e),t(null,e)}))};t.fetchData=P;t.checkURLReachable=function(e,t){fetch(e).then((function(e){e.ok?t(!0):t(!1)})).catch((function(e){console.log("There has been a problem with your fetch operation: "+e.message)}))};t.xyObjectByProperty=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&t){var n=new Map;e.forEach((function(e){var o=e.properties[t];r&&(0,d.isNullUndefinedNaN)(o)||(o=(0,d.isStringNumeric)(o)?+o:o,n.get(o)?n.set(o,n.get(o)+1):n.set(o,1))}));var o=Array.from(n.keys());if(o&&o.length)return o.sort(u.ascending),o.map((function(e){return{x:e,y:+n.get(e)}}))}};var C=(0,a.scaleThreshold)().domain([-.6,-.45,-.3,-.15,0,.15,.3,.45,.6,.75,.9,1.05,1.2]).range([[65,182,196],[127,205,187],[199,233,180],[237,248,177],[255,255,204],[255,237,160],[254,217,118],[254,178,76],[253,141,60],[252,78,42],[227,26,28],[189,0,38],[128,0,38]]);t.COLOR_RANGE=C;t.generateDeckLayer=function(e,t,r,n){var o=function(e,t){Object.keys(e).forEach((function(r){return t[r]=e[r]}))};if("icon"===e){var a={id:"icon-layer",data:t,pickable:!0,iconAtlas:m.default,iconMapping:s.default,sizeScale:60,getPosition:function(e){return e.geometry.coordinates},wrapLongitude:!0,onHover:r};return o(n,a),new y.default(a)}return function(e,t,r){var a=(0,b.getLayerProps)(e);if(!a||!a.class||!a.class.value)return null;var i={},l={};return Object.keys(a).forEach((function(e){var r=a[e]&&a[e].type;"number"===r||"column"===r?(i[e]=a[e].default,"column"===r&&"function"===typeof n[e]&&(l[e]="function"===typeof n[e]&&t.map((function(t){return n[e](t)})))):i[e]="boolean"===r||"class"===r?a[e].value:a[e]})),i.data=t,i.id=e+"-layer",i.onHover=r,i.getPosition=function(e){return e.geometry.coordinates},o(n,i),i.updateTriggers=j(j({},i.updateTriggers),l),new a.class.value(i)}(e,t,r)};t.getCentroid=function(e){var t=e.reduce((function(t,r){return[t[0]+r[0]/e.length,t[1]+r[1]/e.length]}),[0,0]);return t=[parseFloat(t[1].toFixed(3)),parseFloat(t[0].toFixed(3))]};t.convertRange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{oldMax:10,oldMin:1,newMax:1,newMin:0},r=(e-t.oldMin)*(t.newMax-t.newMin)/(t.oldMax-t.oldMin)+t.newMin;return+r.toFixed(2)};t.getViewportParams=function(e){if("string"!==typeof e||!e)return null;var t=f.default.parse(e.replace("?","")),r=Number(t.lat).toFixed(3),n=Number(t.lng).toFixed(3);return{latitude:isNaN(r)?53.8321:Number(r),longitude:isNaN(n)?-1.6362:Number(n),zoom:Number(f.default.parse(e).zoom)||10,pit:Number(f.default.parse(e).pit)||55,bea:Number(f.default.parse(e).bea)||0,alt:Number(f.default.parse(e).alt)||1.5}};t.getBbx=function(e){if(!e)return null;var t=e._sw.lng,r=e._ne.lng,n=e._sw.lat,o=e._ne.lat;return t>r&&(r=e._sw.lng,t=e._ne.lng),n>o&&(o=e._sw.lat,n=e._ne.lat),{xmin:t,ymin:n,xmax:r,ymax:o}};t.suggestDeckLayer=function(e){var t=(0,d.randomToNumber)(e&&e.length);if(!e||!e[t].geometry||!e[t].geometry.type)return null;var r=(0,h.sfType)(e[t]);return new RegExp("point","i").test(r)?"grid":new RegExp("line","i").test(r)?"line":"geojson"};t.suggestUIforNumber=function(e){var t=p.default.UI_LIST;return e?1===e?t[0]:e>3&&e<=6?t[1]:2===e||3===e?t[2]:e>9&&e<15?t[3]:t[4]:t[1]};t.humanize=function(e){if(!(0,d.isString)(e))return e;for(var t=e.split("_"),r=0;r<t.length;r++)t[r]=t[r].charAt(0).toUpperCase()+t[r].slice(1);return t.join(" ")};t.shortenName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:26;if((0,d.isNumber)(e))return parseFloat(Number.parseFloat(e).toFixed(2).toString());if(!e||e.length<=t||!(0,d.isString)(e))return e;var r=e.trim(),n=e.split(".").length>1&&e.split(".").pop().length<10&&e.split(".").pop();return r.replace(n,""),e.length>10&&(r=r.substring(0,10)+"..."+(n||"")),r};t.firstLastNCharacters=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return+e||!e?e:e.slice(0,t)+(e.length>t+t?"..."+e.slice(e.length-t,e.length):e.length>t?"...":"")};t.percentDiv=function(e,t,r,o){return n.default.createElement("div",{key:e,onClick:function(){return"function"===typeof r&&r()},style:{cursor:"pointer",textAlign:"center",position:"relative",float:"left",width:"30%",color:o?"white":"black",margin:"10px 2px",border:"1px solid gray"}},n.default.createElement("span",{style:{position:"absolute",left:"10%"}},e),n.default.createElement("div",{style:{width:t+"%",height:20,background:"rgb(18, 147, 154)"}}))},Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.reduce((function(t,r){return t.concat(Array.isArray(r)&&e>1?r.flat(e-1):r)}),[])}});var x=["http://localhost","http://127.0.0.1"].map((function(e){return[e,e+":8080",e+":8000",e+":5000",e+":3000"]})).flat(),M=new RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?)?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");t.isURL=function(e){return!!(0,d.isString)(e)&&(!!x.some((function(t){return e.startsWith(t)}))||M.test(e))};function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=parseInt(e.substring(1,e.length),16),n=r>>16&255,o=r>>8&255,a=255&r;return t?[n/255,o/255,a/255]:"rgb("+n+","+o+","+a+")"}t.isMobile=function(){var e,t=!1;return window.innerWidth<640||(e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t)};t.colorScale=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180,n=arguments.length>3?arguments[3]:void 0;if(!e||!(0,i.isArray)(t)||!t.length)return null;if(n===R[5]&&t.length<=10){var a=A(o.schemeSet1[t.indexOf(e)],!0);return[].concat(S(a),[r])}var l=t.indexOf(e),u=(0,d.isString)(n)&&N(n)?N(n):o.interpolateOrRd,c=u(l/t.length);return c=c.substring(4,c.length-1).replace(/ /g,"").split(",").map((function(e){return+e})),[].concat(S(c),[r])};var R=["inverseDefault","yellowblue","greens","oranges","diverge","default"];t.colorRangeNames=R;var N=function(e){return e?e===R[0]?o.interpolateReds:e===R[1]?o.interpolateYlGnBu:e===R[2]?o.interpolateGreens:e===R[3]?o.interpolateOranges:e===R[4]?o.interpolateSinebow:o.interpolateOrRd:o.interpolateOrRd};t.colorRangeNamesToInterpolate=N;t.colorRanges=function(e){if(e){return{yellowblue:[[255,255,204],[199,233,180],[127,205,187],[65,182,196],[44,127,184],[37,52,148]],greens:[[237,248,233],[199,233,192],[161,217,155],[116,196,118],[49,163,84],[0,109,44]],oranges:[[254,237,222],[253,208,162],[253,174,107],[253,141,60],[230,85,13],[166,54,3]],diverge:[[140,81,10],[216,179,101],[246,232,195],[199,234,229],[90,180,172],[1,102,94]],inverseDefault:[[189,0,38],[240,59,32],[253,141,60],[254,178,76],[254,217,118],[255,255,178]],default:[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]]}[e]}};t.getColorArray=function(e){if(!(0,d.isString)(e))return null;return{yellowblue:[0,52,148],greens:[0,255,0],oranges:[166,166,0],diverge:[255,102,94],inverseDefault:[255,255,178],default:[189,0,38]}[e]};t.iconJSType=function(e){if(!e)return null;switch(e){case"String":e="fa fa-globe";break;case"Number":e="fa fa-list";break;case"Object":e="fa fa-sack";break;default:e="fa fa-question-circle"}return e};t.searchNominatom=function(e,t){P("https://nominatim.openstreetmap.org/search/"+e+"?format=json",(function(e){"function"===typeof t&&t(e)}))};t.generateLegend=function(e){var t=e.domain,r=e.interpolate,a=void 0===r?o.interpolateOrRd:r,i=e.title,l=(0,d.randomToNumber)(t&&t.length);if(!t||!Array.isArray(t)||!(0,d.isNumber)(t[l]))return null;var u=t[t.length-1],c=t[0];if(!(0,d.isNumber)(u)||!(0,d.isNumber)(c))return null;for(var f=[n.default.createElement("p",{key:"title"},i)],s=t.length<10?t.length:10,p=0;p<s;p+=1)f.push(0===p?n.default.createElement("i",{key:p},c.toFixed(2)):p===s-1?n.default.createElement("i",{key:p},u.toFixed(2)):n.default.createElement("span",{key:p,style:{background:a(p/s)}}));return f};t.generateDomain=function(e,t){if(e&&Array.isArray(e)&&t&&e.length){var r=!0,n=[];return e.forEach((function(e){var o=e.properties[+t?Object.keys(e.properties)[t]:t];o&&(+o&&"Mean.Travel.Time..Seconds."===t?n.push(Math.floor(o/300)):+o?n.push(+o):(r=!1,n.push(o)))})),n=Array.from(new Set(n)),r&&(n=n.sort((function(e,t){return e-t}))),n}};t.sortNumericArray=function(e){var t=!0;return e.map((function(e){return!(0,d.isNumber)(e)&&(t=!1)})),t&&(e=e.sort((function(e,t){return e-t}))),e};t.getMax=function(e){return e.reduce((function(e,t){return e>=t?e:t}),-1/0)};t.getMin=function(e){return e.reduce((function(e,t){return e<=t?e:t}),1/0)};t.getOSMTiles=function(e){var t={OSM:"http://tile.openstreetmap.org/{z}/{x}/{y}.png",OSMB:"http://b.tile.openstreetmap.org/{z}/{x}/{y}.png",TONER:"http://tile.stamen.com/toner/{z}/{x}/{y}.png",STAMEN:"https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg"};return{version:8,sources:{"simple-tiles":{type:"raster",tiles:[t[e]||t.STAMEN],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"simple-tiles"}]}};t.setGeojsonProps=function(e,t,r){var n=(0,d.isString)(r)&&r.split(":")[0],o=(0,d.isString)(r)&&r.split(":")[1]||r;if(!(0,d.isString)(r))return e;var a=Object.assign({},e);return a.features=[],(0,d.isObject)(e)&&(0,i.isArray)(t)&&(0,d.isString)(r)&&e.features&&e.features[0]&&e.features[0].properties[o]&&t[0]&&t[0].properties&&t[0].properties[n]?(e.features.forEach((function(e){for(var r=0;r<t.length;r++)if(e.properties[o]===t[r].properties[n]){var i={type:e.type,properties:t[r].properties,geometry:e.geometry};a.features.push(i);break}})),a):null};t.getFirstDateColumnName=function(e){if(!(0,d.isObject)(e)||!Object.keys(e))return null;var t=new RegExp(p.default.DATE_REGEX);return Object.keys(e).filter((function(e){return t.test(e)}))[0]};var T=function(e){return e&&e.length&&e.length+" row"+(e.length>1?"s":"")};t.getMainMessage=function(e,t){return e&&e.length&&t&&t.length?T(e)+(e.length<t.length?" of "+t.length:""):e&&e.length?T(e):"Nothing to show"};t.theme=function(e){return{color:e?"white":"black",background:e?"#242730":"white"}};t.isStringDate=function(e){return k.fromFormat(e+"","MMMM dd yyyy").isValid||k.fromFormat(e+"","MMMM d yyyy").isValid||k.fromFormat(e+"","MMM d yyyy").isValid||k.fromFormat(e+"","MMM dd yyyy").isValid||k.fromFormat(e+"","dd/MM/yyyy").isValid||k.fromFormat(e+"","dd-MM-yyyy").isValid||k.fromFormat(e+"","yyyy/mm/dd").isValid||k.fromFormat(e+"","yyyy-mm-dd").isValid||k.fromISO(e).isValid||k.fromHTTP(e).isValid||O(e)===Number&&k.fromMillis(e).isValid};var L=function(e){return Array.isArray(e)&&e.length?Array.from(new Set(e)).length:null};t.uniqueValuePercentage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,r=L(e);return r||0===r?r/e.length*100>t:null};t.updateHistory=function(e){if(e){var t="?",r=["defaultURL","geographyURL","geographyColumn"];Object.keys(e).forEach((function(n){"latitude"===n?t+="lat=".concat(e[n].toFixed(3),"&"):"longitude"===n?t+="lng=".concat(e[n].toFixed(3),"&"):"zoom"===n?t+="".concat(n,"=").concat(e[n].toFixed(2),"&"):"bearing"===n||"pitch"===n||"altitude"===n?t+="".concat(n.substring(0,3),"=").concat(e[n],"&"):r.includes(n)&&(0,d.isString)(e[n])&&(t+="".concat(n,"=").concat(e[n],"&"))})),t=t.slice(0,-1);var n={pathname:g.default.location.pathname,search:t};g.default.location.search?g.default.replace(n):g.default.push(n)}};t.screenshot=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0,o="tgve-screenshot.png";if(e&&t){var a=e.getCanvas();t.redraw(!0);var i=t.canvas,l=document.createElement("canvas");l.width=a.width,l.height=a.height;var u=l.getContext("2d");if(u.globalAlpha=1,u.drawImage(a,0,0),u.globalAlpha=1,u.drawImage(i,0,0),r)(0,c.default)(document.body).then((function(e){u.drawImage(e,0,0),"function"!==typeof n?D(l,o):n(l,o)}));else{if("function"===typeof n)return void n(l,o);D(l,o)}}};var D=function(e,t){var r=e.toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.download=t,n.href=r,n.click()};t.iWithFaName=function(e,t,r){return n.default.createElement("i",{style:{margin:5,cursor:"pointer",fontSize:r||"1.5em"},onClick:t,className:e||"fa fa-info"})}},69:function(e,t,r){"use strict";var n=function(e){return null!==e&&void 0!==e&&e.constructor===String},o=function(e){return null!==e&&void 0!==e&&e.constructor===Number},a=function(e){return null!==e&&void 0!==e&&e.constructor===Boolean};t.isNullUndefinedNaN=function(e){return null===e||void 0===e||"number"===typeof e&&isNaN(e)},t.isStringNumeric=function(e){return"string"===typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))},t.randomToNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e&&+e?Math.floor(Math.random()*e):0},t.isBoolean=a,t.isString=n,t.isNumber=o,t.isObject=function(e){return null!==e&&void 0!==e&&e.constructor===Object},t.isArray=function(e){return null!==e&&void 0!==e&&e.constructor===Array},t.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t.sanitizeFloat=function(e){if(o(e))return e;if(n(e)){var t=parseFloat(e);return isNaN(t)?null:t}return null},t.sanitizeInt=function(e){return o(e)?e:n(e)?parseInt(e):null},t.sanitizeString=function(e){return n(e)?e:o(e)?e.toString():null},t.sanitizeStringNonNull=function(e){return n(e)?e:o(e)?e.toString():""},t.sanitizeBool=function(e){return a(e)?e:o(e)?Boolean(e):null},t.isEmptyOrSpaces=function(e){return null===e||null!==e.match(/^ *$/)}}},[[445,1,2]]]);
//# sourceMappingURL=main.72b4e6d9.chunk.js.map